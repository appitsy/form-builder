{"version":3,"sources":["Components/SchemaEditor.tsx","Components/ComponentList.tsx","Components/ComponentProperties/ComponentEditingSchemas/templates/common.ts","Components/DraggableComponent.tsx","Components/ComponentProperties/ComponentEditingSchemas/ButtonEditingSchema.ts","Components/ComponentProperties/ComponentEditingSchemas/CheckboxEditingSchema.ts","Components/ComponentProperties/ComponentEditingSchemas/ColumnsEditingSchema.ts","Components/ComponentProperties/ComponentEditingSchemas/EmailEditingSchema.ts","Components/ComponentProperties/ComponentEditingSchemas/MultiCheckboxEditingSchema.ts","Components/ComponentProperties/ComponentEditingSchemas/NumberEditingSchema.ts","Components/ComponentProperties/ComponentEditingSchemas/ObjectEditingSchema.ts","Components/ComponentProperties/ComponentEditingSchemas/PanelEditingSchema.ts","Components/ComponentProperties/ComponentEditingSchemas/PasswordEditingSchema.ts","Components/ComponentProperties/ComponentEditingSchemas/RadioEditingSchema.ts","Components/ComponentProperties/ComponentEditingSchemas/SelectEditingSchema.ts","Components/ComponentProperties/ComponentEditingSchemas/TableEditingSchema.ts","Components/ComponentProperties/ComponentEditingSchemas/TabsEditingSchema.ts","Components/ComponentProperties/ComponentEditingSchemas/TextAreaEditingSchema.ts","Components/ComponentProperties/ComponentEditingSchemas/TextFieldEditingSchema.ts","Components/ComponentProperties/ComponentEditingSchemas/index.ts","Components/ComponentProperties/ComponentProperties.tsx","Components/PreviewComponent.tsx","Components/DroppableComponent.tsx","Components/DraggableDroppableComponent.tsx","Components/FormDesigner.tsx","Components/DroppableForm.tsx","Components/NewComponentConfirmForm.tsx","Components/Designer.tsx","App.tsx","serviceWorker.ts","index.tsx","Utilities/ComponentTypes.ts"],"names":["SchemaActions","styled","div","SchemaActionButton","Button","SchemaEditor","props","useState","isSchemaEditable","setIsSchemaEditable","editingSchema","setEditingSchema","schema","prepareJsonSchema","copyToClipboard","text","navigator","clipboard","writeText","jsonFormattedString","JSON","stringify","startSchemaEditing","endSchemaEditing","jsonArray","eval","_","isArray","Error","saveSchema","map","x","parseComponentJson","onSchemaChange","name","display","label","leftIcon","onClick","style","className","rows","value","onChange","evt","target","src","components","ComponentItems","ComponentListItem","item","type","operation","useDrag","options","dropEffect","collect","monitor","opacity","isDragging","end","dropResult","resetPreview","drag","ref","children","ComponentTypeSection","ComponentSectionName","h6","ComponentSectionItems","RenderComponentTypes","types","resetPreviewCallback","getDisplayNameForType","ComponentList","BasicComponentTypes","LayoutComponentTypes","DataComponentTypes","TextInput","hideLabel","length","NumberInput","Checkbox","Table","Name","Label","HideLabel","Description","Prefix","Tooltip","Suffix","Placeholder","Hidden","Disabled","Path","DefaultValueTextInput","DefaultValueNumberInput","RequiredCheckbox","MinLength","MaxLength","MinValue","MaxValue","InvalidChars","ColumnNoLabel","Tabs","tabs","data","path","Tab","DisplayTab","DataTab","ValidationsTab","BaseComponentDisplayProperties","BaseTextInputDisplayProperties","BaseComponentDataProperties","BaseTextInputDataProperties","BaseTextInputValidationsProperties","ButtonEditingSchema","CheckboxEditingSchema","ColumnsEditingSchema","EmailEditingSchema","MultiCheckboxEditingSchema","NumberEditingSchema","ObjectEditingSchema","PanelEditingSchema","PasswordEditingSchema","RadioEditingSchema","SelectEditingSchema","TableEditingSchema","TabsEditingSchema","addNewDefault","TextAreaEditingSchema","TextFieldEditingSchema","ComponentEditingSchemas","Types","TextField","TextArea","Email","Number","MultiCheckbox","Password","Select","Radio","Panel","Columns","ObjectComponent","PropertiesPane","ComponentProperties","React","memo","componentEditingSchema","component","undefined","classNames","onDataChange","updateComponentSchema","prevProps","nextProps","isEqual","StyledPreviewComponent","PreviewComponent","DroppableArea","border","DroppableComponent","useDrop","accept","ComponentTypes","hover","draggedId","id","isOver","shallow","addPreview","drop","onDrop","parent","canDrop","isActive","selectBorder","previewComponent","Actions","StyledPage","Styled","DropFieldsHere","StyledDraggableDroppableComponent","dragRef","useRef","dropRef","isAfter","hoverBoundingRect","current","getBoundingClientRect","hoverMiddleY","bottom","top","getClientOffset","y","draggedType","moveAdjacent","droppedId","getItem","didDrop","moveComponent","preview","moveAction","Icon","icon","editAction","deleteAction","isEditing","StyledDroppableComponent","FormDesigner","dropFieldsHereComponent","renderDesignerComponent","renderedComponent","key","columnsComponentSchema","panelComponentSchema","tabsComponentSchema","tableComponentSchema","cloneDeep","minOneRow","allowAddRemove","allowSorting","onEdit","onDelete","this","childComponents","parentPath","parentComponent","inner","child","flex","renderChildren","Form","FormAndProperties","StyledComponentProperties","DroppableForm","rootComponent","onSubmit","editingComponent","nameAndLabelFormSchema","Heading","h5","NewComponentConfirmForm","setData","componentType","buttonName","onConfirm","onCancel","DesignerPage","ComponentListContainer","DesignerPreview","NewComponentConfirmModalWrapper","NewComponentConfirmModal","Modal","NewComponentConfirmFormWrapper","Designer","setRootComponent","setEditingComponent","previewComponentState","setPreviewComponentState","newComponentDropped","setNewComponentDropped","useEffect","updateRootComponent","root","newEditComponent","updatedEditingComponent","findComponentById","onEditWithComponentInternal","rootComponentCopy","previousEditingComponent","componentId","parentChildren","removeComponent","findInSchema","find","c","some","childChildren","componentArray","remove","insertComponent","atIndex","splice","insertComponentAtIndex","isNew","push","isAlreadyAdjacent","adjacentComponentId","after","componentIndex","findIndex","resetDragDropPreviewInternal","parentId","previewComponentParent","DndProvider","backend","HTML5Backend","componentEl","newComponent","getDefaultPropsForType","grandParentComponent","parentChildComponents","grandParentChildren","parentIndex","oldParentComponent","newParent","newGrandParentComponent","newParentChildren","newGrandParentChildren","previewComponentParentTemp","console","error","newParentId","oldParentChildren","adjacentComponent","indexOf","updatedComponentSchema","parentComponentChildren","componentIdx","isOpen","onEditWithComponent","AppRoot","AppTabs","tabPanelStyle","flexGrow","borderTop","Card","TabContent","TabPane","App","setSchema","activeTab","setActiveTab","tabPaneClasses","idx","tabButtonClasses","href","data-toggle","s","alert","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","serviceWorker","ready","then","registration","unregister","catch","message","createNewTab","tabProperties","uuidv4","createTableRow","TableRowExpandedTypeName","commonProperties","defaultsDeep","placeholder","checkboxes","panel","expandable","expanded","tab1","json","defaultProps","assign","tab","jsonSchema","filter"],"mappings":"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","file":"static/js/main.7a10e058.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\n\r\nimport _ from 'lodash';\r\nimport ReactJson from 'react-json-view';\r\n\r\nimport { Button } from '@appitsy/forms/components/Basic';\r\nimport styled from '@emotion/styled';\r\n\r\nimport {\r\n  parseComponentJson,\r\n  prepareJsonSchema,\r\n} from '../Utilities/ComponentTypes';\r\nimport { ComponentSchemaWithId } from './FormDesigner';\r\n\r\nconst SchemaActions = styled.div`\r\n  text-align: right;\r\n  margin-bottom: 10px;\r\n`;\r\n\r\nconst SchemaActionButton = styled(Button)`\r\n\tmargin-left: 10px;\r\n`\r\n\r\ninterface SchemaEditorProps {\r\n\tschema: ComponentSchemaWithId[];\r\n  onSchemaChange: (updatedSchema: ComponentSchemaWithId[]) => void;\r\n}\r\n\r\nexport const SchemaEditor = (props: SchemaEditorProps) => {\r\n\tconst [isSchemaEditable, setIsSchemaEditable] = useState<boolean>(false);\r\n  const [editingSchema, setEditingSchema] = useState<string>('');\r\n\t\r\n\tconst schema = prepareJsonSchema(props.schema);\r\n  const copyToClipboard = (text: string) => navigator.clipboard.writeText(text);\r\n  const jsonFormattedString = () => JSON.stringify(schema, null, \"  \");\r\n\r\n  const startSchemaEditing = () => {\r\n    setIsSchemaEditable(true);\r\n    setEditingSchema(jsonFormattedString());\r\n  };\r\n\r\n  const endSchemaEditing = () => {\r\n    setIsSchemaEditable(false);\r\n\t\tsetEditingSchema('');\r\n\t\t// we'll have to use eval here\r\n\t\t// so that we can parse relaxed json\r\n    // eslint-disable-next-line no-eval\r\n    const jsonArray = eval(`(${editingSchema})`);\r\n    if (!_.isArray(jsonArray)) {\r\n      throw new Error('JSON Array expected here..');\r\n    }\r\n\r\n    const saveSchema = jsonArray.map(x => parseComponentJson(x));\r\n\r\n    props.onSchemaChange(saveSchema);\r\n  }\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<SchemaActions>\r\n\t\t\t\t{ \r\n\t\t\t\t\tisSchemaEditable\r\n\t\t\t\t\t\t// eslint-disable-next-line react/style-prop-object\r\n\t\t\t\t\t\t? (<SchemaActionButton name='saveSchema' display={{ label:'Save', leftIcon: 'save' }} onClick={endSchemaEditing} style='secondary' />)\r\n\t\t\t\t\t\t// eslint-disable-next-line react/style-prop-object\r\n\t\t\t\t\t\t: (<SchemaActionButton name='editSchema' display={{ label: 'Edit', leftIcon: 'pen' }} onClick={startSchemaEditing} style='secondary' />)\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t{ /*eslint-disable-next-line react/style-prop-object */ }\r\n\t\t\t\t<SchemaActionButton name='copyToClipboard' display={{ label: 'Copy', leftIcon: 'clipboard' }} onClick={() => copyToClipboard(jsonFormattedString())} style='primary' />\r\n\t\t\t</SchemaActions>\r\n\t\t\t<div className=\"card card-body bg-light\">\r\n\t\t\t\t{ \r\n\t\t\t\t\tisSchemaEditable \r\n\t\t\t\t\t\t? (<textarea rows={20} value={editingSchema} onChange={(evt) => setEditingSchema(evt.target.value)}> sd </textarea>)\r\n\t\t\t\t\t\t: (<ReactJson src={schema} />)\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}","import React from 'react';\r\n\r\nimport { getDisplayNameForType } from '@appitsy/forms/types/Types';\r\nimport styled from '@emotion/styled';\r\n\r\nimport {\r\n  BasicComponentTypes,\r\n  DataComponentTypes,\r\n  LayoutComponentTypes,\r\n} from '../Utilities/ComponentTypes';\r\nimport { DraggableComponent } from './DraggableComponent';\r\n\r\ntype ResetPreviewCallback = () => void;\r\n\r\ninterface ComponentListProps {\r\n  resetPreview: ResetPreviewCallback;\r\n}\r\n\r\nconst ComponentItems = styled.div`\r\n  overflow: hidden;\r\n  clear: both;\r\n  height: 100%;\r\n`;\r\n\r\nconst ComponentListItem = styled(DraggableComponent)`\r\n  border-radius: 10px;\r\n  z-index: 2;\r\n  background-color: white;\r\n  box-shadow: 0 1px 3px 0 rgba(0,0,0,.1), 0 1px 2px 0 rgba(0,0,0,.06);\r\n  padding: 0.5rem 1rem;\r\n  float: left;\r\n  width: 90px;\r\n  height: 55px;\r\n  margin: 5px;\r\n  font-size: 14px;\r\n  text-align: center;\r\n\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nconst ComponentTypeSection = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-top: 15px;\r\n`;\r\n\r\nconst ComponentSectionName = styled.h6`\r\n  margin: 0px 10px 5px 10px;\r\n  padding-bottom: 5px;\r\n  border-bottom: 2px solid lightgrey;\r\n`;\r\n\r\nconst ComponentSectionItems = styled.div`\r\n  display: block;\r\n`;\r\n\r\nconst RenderComponentTypes = (types: string[], resetPreviewCallback: ResetPreviewCallback) => {\r\n  return types.map(type => {\r\n    const name = getDisplayNameForType(type);\r\n    return (\r\n      <ComponentListItem \r\n        name={name} \r\n        type={type} \r\n        operation='drop'\r\n        resetPreview={resetPreviewCallback}\r\n      >\r\n        <span>{name}</span>\r\n      </ComponentListItem>\r\n    );\r\n  })\r\n}\r\n\r\nconst ComponentList = (props: ComponentListProps) => (\r\n  <ComponentItems>\r\n    <ComponentTypeSection>\r\n      <ComponentSectionName>Basic</ComponentSectionName>\r\n      <ComponentSectionItems>\r\n        { RenderComponentTypes(BasicComponentTypes, props.resetPreview) }\r\n      </ComponentSectionItems>\r\n      \r\n    </ComponentTypeSection>\r\n    <ComponentTypeSection>\r\n      <ComponentSectionName>Layout</ComponentSectionName>\r\n      <ComponentSectionItems>\r\n        { RenderComponentTypes(LayoutComponentTypes, props.resetPreview) }\r\n      </ComponentSectionItems>\r\n    </ComponentTypeSection>\r\n    <ComponentTypeSection>\r\n      <ComponentSectionName>Data</ComponentSectionName>\r\n      <ComponentSectionItems>\r\n        { RenderComponentTypes(DataComponentTypes, props.resetPreview) }\r\n      </ComponentSectionItems>\r\n      \r\n    </ComponentTypeSection>\r\n  </ComponentItems>\r\n);\r\n\r\nexport default ComponentList;\r\n","export const TextInput = (name: string, label: string) => ({\r\n\ttype: 'text',\r\n\tname,\r\n\tdisplay: {\r\n\t\tlabel,\r\n\t\thideLabel: label.length === 0\r\n\t}\r\n});\r\n\r\nexport const NumberInput = (name: string, label: string) => ({\r\n\ttype: 'number',\r\n\tname,\r\n\tdisplay: {\r\n\t\tlabel,\r\n\t}\r\n})\r\n\r\nexport const Checkbox = (name: string, label: string) => ({\r\n\ttype: 'checkbox',\r\n\tname,\r\n\tdisplay: {\r\n\t\tlabel\r\n\t}\r\n});\r\n\r\nexport const Table = (name: string, label: string, components: any[]) => ({\r\n\ttype: 'table',\r\n\tname,\r\n\tdisplay: {\r\n\t\tlabel\r\n\t},\r\n\tcomponents\r\n})\r\n\r\n/// DISPLAY Fields\r\nexport const Name = TextInput('name', 'Name');\r\nexport const Label = TextInput('label', 'Label');\r\nexport const HideLabel = Checkbox('hideLabel', 'Hide Label');\r\nexport const Description = TextInput('description', 'Description');\r\nexport const Prefix = TextInput('prefix', 'Prefix');\r\nexport const Tooltip = TextInput('tooltip', 'Tooltip');\r\nexport const Suffix = TextInput('suffix', 'Suffix');\r\nexport const Placeholder = TextInput('placeholder', 'Placeholder');\r\nexport const Hidden = Checkbox('hidden', 'Hidden');\r\nexport const Disabled = Checkbox('disabled', 'Disabled');\r\n\r\n/// DATA Fields\r\nexport const Path = TextInput('path', 'Path')\r\nexport const DefaultValueTextInput = TextInput('defaultValue', 'Default Value');\r\nexport const DefaultValueNumberInput = NumberInput('defaultValue', 'Default Value');\r\n\r\n/// VALIDATION fields\r\nexport const RequiredCheckbox = Checkbox('required', 'Required');\r\nexport const MinLength = TextInput('minLength', 'Min Length');\r\nexport const MaxLength = TextInput('maxLength', 'Max Length')\r\nexport const MinValue = TextInput('minValue', 'Min Value');\r\nexport const MaxValue = TextInput('maxValue', 'Max Value');\r\nexport const InvalidChars = TextInput('invalidChars', 'Invalid Characters');\r\n\r\nexport const ColumnNoLabel = (components: any[]) => ({\r\n\ttype: 'columns',\r\n\tdisplay: {\r\n\t\thideLabel: true,\r\n\t},\r\n\tcomponents,\r\n})\r\n\r\nexport const ObjectNoLabel = (name: string, components: any[]) => ({\r\n\ttype: \"object\",\r\n\tname,\r\n\tdisplay: {\r\n\t\thideLabel: true\r\n\t},\r\n\tcomponents\r\n})\r\n\r\nexport const Tabs = (tabs: any[]) => (\r\n\t{\r\n    type: 'tabs',\r\n    name: 'configTabs',\r\n\t\tcomponents: tabs,\r\n\t\tdata: {\r\n\t\t\tpath: '$',\r\n\t\t}\r\n\t}\r\n);\r\n\r\nexport const Tab = (name: string, label: string, components: any[]) => (\r\n\t{\r\n\t\tname,\r\n\t\tdisplay: {\r\n\t\t\tlabel\r\n\t\t},\r\n\t\tcomponents\r\n\t}\r\n)\r\n\r\nexport const DisplayTab = (components: any[]) => Tab('display', 'Display', components);\r\nexport const DataTab = (components: any[]) => Tab('data', 'Data', components);\r\nexport const ValidationsTab = (components: any[]) => Tab('validations', 'Validations', components);\r\n\r\nexport const BaseComponentDisplayProperties = [\r\n\tLabel,\r\n\tHideLabel,\r\n];\r\n\r\nexport const BaseInputDisplayProperties = [\r\n\t...BaseComponentDisplayProperties,\r\n\tDescription,\r\n\tTooltip,\r\n\tColumnNoLabel([\r\n\t\tHidden,\r\n\t\tDisabled,\r\n\t])\r\n]\r\n\r\nexport const BaseTextInputDisplayProperties = [\r\n\t...BaseComponentDisplayProperties,\r\n\tPlaceholder,\r\n\tColumnNoLabel([\r\n\t\tPrefix,\r\n\t\tSuffix,\r\n\t])\r\n];\r\n\r\nexport const BaseComponentDataProperties = [\r\n\tPath,\r\n];\r\n\r\nexport const BaseTextInputDataProperties = [\r\n\t...BaseComponentDataProperties,\r\n\tDefaultValueTextInput,\r\n];\r\n\r\nexport const BaseTextInputValidationsProperties = [\r\n\tRequiredCheckbox,\r\n\tMinLength,\r\n\tMaxLength,\r\n]","import React from \"react\";\r\nimport { useDrag } from \"react-dnd\";\r\n\r\ninterface DraggableComponentProps {\r\n  name: string;\r\n  type: string;\r\n  operation: string;\r\n  className?: string;\r\n  resetPreview(): void;\r\n}\r\n\r\nexport const DraggableComponent: React.FC<DraggableComponentProps> = (\r\n  props\r\n) => {\r\n  let item = {\r\n    name: props.name,\r\n    type: props.type,\r\n    operation: props.operation,\r\n  };\r\n  const [{ opacity }, drag] = useDrag({\r\n    item,\r\n    options: {\r\n      dropEffect: \"copy\",\r\n    },\r\n    collect: (monitor: any) => ({\r\n      opacity: monitor.isDragging() ? 0.6 : 1,\r\n    }),\r\n    end: (dropResult, monitor) => {\r\n      props.resetPreview();\r\n    },\r\n  });\r\n\r\n  return (\r\n    <div ref={drag} className={props.className} style={{ opacity }}>\r\n      {props.children}\r\n    </div>\r\n  );\r\n};\r\n","import { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\n\r\nimport {\r\n  DisplayTab,\r\n  Label,\r\n  Name,\r\n  Tabs,\r\n  TextInput,\r\n} from './templates/common';\r\n\r\nexport const ButtonEditingSchema: ComponentSchema[] = [\r\n  Name,\r\n  TextInput('style', 'Style'),\r\n  Tabs([\r\n    DisplayTab([\r\n      Label,\r\n      TextInput('leftIcon', 'Left Icon'),\r\n      TextInput('rightIcon', 'Right Icon'),\r\n    ])\r\n  ])\r\n];","import { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\n\r\nimport {\r\n  DataTab,\r\n  DisplayTab,\r\n  Label,\r\n  Name,\r\n  Path,\r\n  RequiredCheckbox,\r\n  Tabs,\r\n  ValidationsTab,\r\n} from './templates/common';\r\n\r\nconst DefaultValueCheckbox = {\r\n  type: \"checkbox\",\r\n  name: \"defaultValue\",\r\n  display: {\r\n    label: \"Default Value\"\r\n  }\r\n};\r\n\r\nexport const CheckboxEditingSchema: ComponentSchema[] = [\r\n  Name,\r\n  Tabs([\r\n    DisplayTab([\r\n      Label,\r\n    ]),\r\n    DataTab([\r\n      Path,\r\n      DefaultValueCheckbox\r\n    ]),\r\n    ValidationsTab([\r\n      RequiredCheckbox,\r\n    ])\r\n  ])\r\n];","import { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\n\r\nimport {\r\n  DisplayTab,\r\n  Label,\r\n  Name,\r\n  Tabs,\r\n} from './templates/common';\r\n\r\nexport const ColumnsEditingSchema: ComponentSchema[] = [\r\n  Name,\r\n  Tabs([\r\n    DisplayTab([\r\n      Label,\r\n    ])\r\n  ]),\r\n]","import { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\n\r\nimport {\r\n  DataTab,\r\n  DefaultValueTextInput,\r\n  DisplayTab,\r\n  Label,\r\n  MaxLength,\r\n  MinLength,\r\n  Name,\r\n  Path,\r\n  Prefix,\r\n  RequiredCheckbox,\r\n  Suffix,\r\n  Tabs,\r\n  ValidationsTab,\r\n} from './templates/common';\r\n\r\nexport const EmailEditingSchema: ComponentSchema[] = [\r\n  Name,\r\n  Tabs([\r\n    DisplayTab([\r\n      Label,\r\n      Prefix,\r\n      Suffix,\r\n    ]),\r\n    DataTab([\r\n      Path,\r\n      DefaultValueTextInput,\r\n    ]),\r\n    ValidationsTab([\r\n      RequiredCheckbox,\r\n      MinLength,\r\n      MaxLength,\r\n    ])\r\n  ])\r\n]","import { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\n\r\nimport {\r\n  ColumnNoLabel,\r\n  DataTab,\r\n  Description,\r\n  Disabled,\r\n  DisplayTab,\r\n  Hidden,\r\n  Label,\r\n  Name,\r\n  NumberInput,\r\n  Table,\r\n  Tabs,\r\n  TextInput,\r\n  ValidationsTab,\r\n} from './templates/common';\r\n\r\nexport const MultiCheckboxEditingSchema: ComponentSchema[] = [\r\n  Name,\r\n  Tabs([\r\n    DisplayTab([\r\n      Label,\r\n      Description,\r\n      Hidden,\r\n      Disabled,\r\n    ]),\r\n    DataTab([\r\n      Table('checkboxes', 'Checkboxes', [\r\n        TextInput('value', 'Value'),\r\n        TextInput('label', 'Label'),\r\n      ])\r\n    ]),\r\n    ValidationsTab([\r\n      ColumnNoLabel([\r\n        NumberInput('minSelected', 'Min Selected'),\r\n        NumberInput('maxSelected', 'Max Selected'),\r\n      ])\r\n    ]),\r\n  ])\r\n]","import { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\n\r\nimport {\r\n  ColumnNoLabel,\r\n  DataTab,\r\n  DefaultValueNumberInput,\r\n  Description,\r\n  Disabled,\r\n  DisplayTab,\r\n  Hidden,\r\n  Label,\r\n  MaxLength,\r\n  MaxValue,\r\n  MinLength,\r\n  MinValue,\r\n  Name,\r\n  Prefix,\r\n  RequiredCheckbox,\r\n  Suffix,\r\n  Tabs,\r\n  Tooltip,\r\n  ValidationsTab,\r\n} from './templates/common';\r\n\r\nexport const NumberEditingSchema: ComponentSchema[] = [\r\n  Name,\r\n  Tabs([\r\n    DisplayTab([\r\n      Label,\r\n      Description,\r\n      Prefix,\r\n      Suffix,\r\n      Tooltip,\r\n      Disabled,\r\n      Hidden,\r\n    ]),\r\n    DataTab([\r\n      DefaultValueNumberInput,\r\n    ]),\r\n    ValidationsTab([\r\n      RequiredCheckbox,\r\n      ColumnNoLabel([\r\n        MinValue,\r\n        MaxValue,\r\n      ]),\r\n      ColumnNoLabel([\r\n        MinLength,\r\n        MaxLength,\r\n      ])\r\n    ]),\r\n  ])\r\n]","import { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\n\r\nimport {\r\n  BaseComponentDataProperties,\r\n  BaseComponentDisplayProperties,\r\n  DataTab,\r\n  DisplayTab,\r\n  Name,\r\n  Tabs,\r\n} from './templates/common';\r\n\r\nexport const ObjectEditingSchema: ComponentSchema[] = [\r\n  Name,\r\n  Tabs([\r\n    DisplayTab(BaseComponentDisplayProperties),\r\n    DataTab(BaseComponentDataProperties),\r\n  ]),\r\n]","import { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\n\r\nimport {\r\n  BaseComponentDataProperties,\r\n  BaseComponentDisplayProperties,\r\n  Checkbox,\r\n  DataTab,\r\n  DisplayTab,\r\n  Name,\r\n  Tabs,\r\n} from './templates/common';\r\n\r\nexport const PanelEditingSchema: ComponentSchema[] = [\r\n  Name,\r\n  Tabs([\r\n    DisplayTab([\r\n      ...BaseComponentDisplayProperties,\r\n      Checkbox('expanded', 'Initially Expanded'),\r\n      Checkbox('expandable', 'Expandable'),\r\n    ]),\r\n    DataTab(BaseComponentDataProperties)\r\n  ]),\r\n]","import { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\n\r\nimport {\r\n  BaseTextInputDisplayProperties,\r\n  BaseTextInputValidationsProperties,\r\n  DataTab,\r\n  DisplayTab,\r\n  Name,\r\n  Path,\r\n  Tabs,\r\n  ValidationsTab,\r\n} from './templates/common';\r\n\r\nexport const PasswordEditingSchema: ComponentSchema[] = [\r\n  Name,\r\n  Tabs([\r\n    DisplayTab(BaseTextInputDisplayProperties),\r\n    DataTab([\r\n      Path,\r\n    ]),\r\n    ValidationsTab(BaseTextInputValidationsProperties)\r\n  ])\r\n];\r\n","import { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\n\r\nimport {\r\n  BaseTextInputDisplayProperties,\r\n  DataTab,\r\n  DisplayTab,\r\n  Name,\r\n  Table,\r\n  Tabs,\r\n  TextInput,\r\n  ValidationsTab,\r\n} from './templates/common';\r\n\r\nexport const RadioEditingSchema: ComponentSchema[] = [\r\n  Name,\r\n  Tabs([\r\n    DisplayTab(BaseTextInputDisplayProperties),\r\n    DataTab([\r\n      Table('options', 'Options', [\r\n        TextInput('value', 'Value'),\r\n        TextInput('label', 'Label'),\r\n      ])\r\n    ]),\r\n    ValidationsTab([]),\r\n  ])\r\n]","import { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\n\r\nimport {\r\n  BaseTextInputDisplayProperties,\r\n  ColumnNoLabel,\r\n  DataTab,\r\n  DisplayTab,\r\n  Name,\r\n  NumberInput,\r\n  Path,\r\n  Table,\r\n  Tabs,\r\n  TextInput,\r\n  ValidationsTab,\r\n} from './templates/common';\r\n\r\nexport const SelectEditingSchema: ComponentSchema[] = [\r\n  Name,\r\n  Tabs([\r\n    DisplayTab(BaseTextInputDisplayProperties),\r\n    DataTab([\r\n      Path,\r\n      Table('options', 'Options', [\r\n        TextInput('value', 'Value'),\r\n        TextInput('label', 'Label'),\r\n      ])\r\n    ]),\r\n    ValidationsTab([\r\n      ColumnNoLabel([\r\n        NumberInput('minSelected', 'Min Selected'),\r\n        NumberInput('maxSelected', 'Max Selected'),\r\n      ])\r\n    ])\r\n  ])\r\n]","import { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\n\r\nimport {\r\n  BaseComponentDataProperties,\r\n  BaseComponentDisplayProperties,\r\n  Checkbox,\r\n  DataTab,\r\n  DisplayTab,\r\n  Name,\r\n  Tabs,\r\n} from './templates/common';\r\n\r\nexport const TableEditingSchema: ComponentSchema[] = [\r\n  Name,\r\n  Tabs([\r\n    DisplayTab([\r\n      ...BaseComponentDisplayProperties,\r\n      Checkbox('minOneRow', 'Min One Row'),\r\n      Checkbox('allowSorting', 'Allow Sorting'),\r\n      Checkbox('allowAddRemove', 'Allow Add/Remove'),\r\n    ]),\r\n    DataTab(BaseComponentDataProperties),\r\n\r\n  ])\r\n];\r\n","import { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\n\r\nimport {\r\n  DataTab,\r\n  DisplayTab,\r\n  Name,\r\n  ObjectNoLabel,\r\n  Path,\r\n  Table,\r\n  Tabs,\r\n  TextInput,\r\n} from './templates/common';\r\n\r\nexport const TabsEditingSchema: ComponentSchema[] = [\r\n  Name,\r\n  Tabs([\r\n    DisplayTab([\r\n      {\r\n        ...Table('components', 'Tabs', \r\n          [\r\n            TextInput('name', 'Tab Name'),\r\n            ObjectNoLabel('display', [\r\n              TextInput('label', '')\r\n            ])\r\n          ]\r\n        ),\r\n        data: {\r\n          path: \"$.components\",\r\n          addNewDefault: \"let tab = ({ \\\"id\\\": uuid(), components: [] }); tab;\",\r\n        }\r\n      }\r\n    ]),\r\n    DataTab([\r\n      Path,\r\n    ])\r\n  ])\r\n]","import { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\n\r\nimport {\r\n  BaseTextInputDataProperties,\r\n  BaseTextInputDisplayProperties,\r\n  ColumnNoLabel,\r\n  DataTab,\r\n  DisplayTab,\r\n  InvalidChars,\r\n  MaxLength,\r\n  MinLength,\r\n  Name,\r\n  RequiredCheckbox,\r\n  Tabs,\r\n  ValidationsTab,\r\n} from './templates/common';\r\n\r\nexport const TextAreaEditingSchema: ComponentSchema[] = [\r\n  Name,\r\n  Tabs([\r\n    DisplayTab(BaseTextInputDisplayProperties),\r\n    DataTab(BaseTextInputDataProperties),\r\n    ValidationsTab([\r\n      RequiredCheckbox,\r\n      ColumnNoLabel([\r\n        MinLength,\r\n        MaxLength\r\n      ]),\r\n      InvalidChars,\r\n    ])\r\n  ])\r\n];\r\n","import { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\n\r\nimport {\r\n  BaseTextInputDataProperties,\r\n  BaseTextInputDisplayProperties,\r\n  ColumnNoLabel,\r\n  DataTab,\r\n  DisplayTab,\r\n  InvalidChars,\r\n  MaxLength,\r\n  MinLength,\r\n  Name,\r\n  RequiredCheckbox,\r\n  Tabs,\r\n  ValidationsTab,\r\n} from './templates/common';\r\n\r\nexport const TextFieldEditingSchema: ComponentSchema[] = [\r\n  Name,\r\n  Tabs([\r\n    DisplayTab(BaseTextInputDisplayProperties),\r\n    DataTab(BaseTextInputDataProperties),\r\n    ValidationsTab([\r\n      RequiredCheckbox,\r\n      ColumnNoLabel([\r\n        MinLength,\r\n        MaxLength\r\n      ]),\r\n      InvalidChars,\r\n    ])\r\n  ])\r\n];\r\n","import { Types } from '@appitsy/forms/types/Types';\r\n\r\nimport { ButtonEditingSchema } from './ButtonEditingSchema';\r\nimport { CheckboxEditingSchema } from './CheckboxEditingSchema';\r\nimport { ColumnsEditingSchema } from './ColumnsEditingSchema';\r\nimport { EmailEditingSchema } from './EmailEditingSchema';\r\nimport { MultiCheckboxEditingSchema } from './MultiCheckboxEditingSchema';\r\nimport { NumberEditingSchema } from './NumberEditingSchema';\r\nimport { ObjectEditingSchema } from './ObjectEditingSchema';\r\nimport { PanelEditingSchema } from './PanelEditingSchema';\r\nimport { PasswordEditingSchema } from './PasswordEditingSchema';\r\nimport { RadioEditingSchema } from './RadioEditingSchema';\r\nimport { SelectEditingSchema } from './SelectEditingSchema';\r\nimport { TableEditingSchema } from './TableEditingSchema';\r\nimport { TabsEditingSchema } from './TabsEditingSchema';\r\nimport { TextAreaEditingSchema } from './TextAreaEditingSchema';\r\nimport { TextFieldEditingSchema } from './TextFieldEditingSchema';\r\n\r\nconst ComponentEditingSchemas = {\r\n\t[Types.TextField]: TextFieldEditingSchema,\r\n\t[Types.TextArea]: TextAreaEditingSchema,\r\n\t[Types.Email]: EmailEditingSchema,\r\n\t[Types.Number]: NumberEditingSchema,\r\n\t[Types.Checkbox]: CheckboxEditingSchema,\r\n\t[Types.MultiCheckbox]: MultiCheckboxEditingSchema,\r\n\t[Types.Password]: PasswordEditingSchema,\r\n\t[Types.Select]: SelectEditingSchema,\r\n\t[Types.Radio]: RadioEditingSchema,\r\n\t[Types.Button]: ButtonEditingSchema,\r\n\t[Types.Panel]: PanelEditingSchema,\r\n\t[Types.Columns]: ColumnsEditingSchema,\r\n\t[Types.Tabs]: TabsEditingSchema,\r\n\r\n\t[Types.Table]: TableEditingSchema,\r\n\t[Types.ObjectComponent]: ObjectEditingSchema,\r\n}\r\n\r\nexport { ComponentEditingSchemas };","import React from 'react';\r\n\r\nimport classNames from 'classnames';\r\nimport _ from 'lodash';\r\n\r\nimport { Form } from '@appitsy/forms';\r\nimport styled from '@emotion/styled';\r\n\r\nimport { ComponentSchemaWithId } from '../FormDesigner';\r\nimport { ComponentEditingSchemas } from './ComponentEditingSchemas';\r\n\r\ninterface ComponentPropertiesProps {\r\n  className?: string;\r\n  component?: ComponentSchemaWithId;\r\n  updateComponentSchema(componentSchema: any): void;\r\n}\r\n\r\nconst PropertiesPane = styled.div`\r\n  padding: 15px;\r\n`;\r\n\r\nconst checkRenderer = (prevProps: ComponentPropertiesProps, nextProps: ComponentPropertiesProps) => {\r\n  return _.isEqual(prevProps.component, nextProps.component);\r\n};\r\n\r\nexport const ComponentProperties = React.memo<ComponentPropertiesProps>((props) => {\r\n  \r\n  const componentEditingSchema = props.component ? ComponentEditingSchemas[props.component.type] : undefined;\r\n\r\n  return (\r\n    <PropertiesPane className={classNames(props.className, 'bg-light')}>\r\n      {\r\n          componentEditingSchema ? (\r\n            <>\r\n              <span>Component Properties</span>\r\n              <Form \r\n                schema={componentEditingSchema} \r\n                data={props.component} \r\n                onDataChange={props.updateComponentSchema} \r\n              />\r\n            </>\r\n          ): (\r\n            <h6>Select a component to continue edit it..</h6>\r\n          )\r\n      }\r\n      \r\n    </PropertiesPane>\r\n  );\r\n}, checkRenderer);\r\n","import React from 'react';\r\nimport styled from \"@emotion/styled\";\r\n\r\ninterface PreviewComponentProps {\r\n    // TODO: some explicit type here\r\n    type: string\r\n}\r\n\r\nexport interface PreviewComponentSchema extends PreviewComponentProps {\r\n    isAfter: boolean;\r\n}\r\n\r\nexport const StyledPreviewComponent = styled.div`\r\n    border-radius: 10px;\r\n    background-color: darkgrey;\r\n    opacity: 50%;\r\n    font-weight: 500;\r\n    padding: 5px 10px;\r\n    line-height: 0.5rem;\r\n    text-transform: capitalize;\r\n`;\r\n\r\nexport const PreviewComponent: React.FC<PreviewComponentProps> = (props) => (\r\n    <StyledPreviewComponent className='unselectable-text'>{props.type}</StyledPreviewComponent>\r\n);\r\n","import styled from '@emotion/styled';\r\nimport React from 'react';\r\nimport { useDrop } from 'react-dnd';\r\nimport { ComponentTypes } from '../Utilities/ComponentTypes';\r\nimport { DragItem } from './DraggableDroppableComponent';\r\nimport { PreviewComponent, PreviewComponentSchema } from './PreviewComponent';\r\n\r\nconst selectBorder = (isActive: boolean, canDrop: boolean) => {\r\n    if (isActive) {\r\n      return 'dashed 1px gray';\r\n    } else {\r\n      return 'dashed 1px transparent';\r\n    }\r\n    // else if (canDrop) {\r\n}\r\n\r\nconst DroppableArea = styled.div<any>`\r\n  width: 100%;\r\n  overflow-y: auto;\r\n  border: ${({border}) => border};\r\n`;\r\n\r\ninterface DroppableComponentProps {\r\n    children: JSX.Element;\r\n    previewComponent?: PreviewComponentSchema;\r\n    id: string;\r\n    onDrop(component: any): void;\r\n    addPreview(componentType: string, adjacentComponentId: string, after: boolean): void;\r\n    className?: string;\r\n}\r\n\r\nexport const DroppableComponent: React.FC<DroppableComponentProps> = (props) => {\r\n    const [{ canDrop, isOver }, drop] = useDrop({\r\n      accept: ComponentTypes,\r\n      hover({ id: draggedId, type }: DragItem, monitor) {\r\n        if (!draggedId && monitor.isOver({ shallow: true })) {\r\n          // new component being dragged\r\n          props.addPreview(type, props.id, false);\r\n        }\r\n      },\r\n      drop: (component, monitor) => {\r\n        if (monitor.isOver()) {\r\n          props.onDrop({...component, parent: props.id});\r\n        }\r\n      },\r\n      collect: (monitor: any) => ({\r\n        isOver: monitor.isOver({ shallow: true }),\r\n        canDrop: monitor.canDrop(),\r\n      }),\r\n    })\r\n  \r\n    const isActive = canDrop && isOver;\r\n    const border = selectBorder(isActive, canDrop);\r\n\r\n    return (\r\n        <DroppableArea border={border} ref={drop} className={props.className}>\r\n            { props.children }\r\n            { props.previewComponent ? <PreviewComponent type={props.previewComponent.type} /> : null }\r\n        </DroppableArea>\r\n    )\r\n  }\r\n  ","import React, { useRef } from 'react';\r\n\r\nimport {\r\n  DragSourceMonitor,\r\n  DropTargetMonitor,\r\n  useDrag,\r\n  useDrop,\r\n  XYCoord,\r\n} from 'react-dnd';\r\n\r\nimport Icon from '@appitsy/forms/components/Basic/Icon';\r\nimport styled from '@emotion/styled';\r\n\r\nimport { ComponentTypes } from '../Utilities/ComponentTypes';\r\nimport {\r\n  PreviewComponent,\r\n  PreviewComponentSchema,\r\n} from './PreviewComponent';\r\n\r\nconst Actions = styled.div`\r\n  display: flex; \r\n  flex-direction: row;\r\n\r\n  * {\r\n    margin: 0px 1px;\r\n  }\r\n\r\n  i {\r\n    font-size: 14px;\r\n  }\r\n`;\r\n\r\nexport interface DraggableDroppableComponentProps {\r\n  operation: string;\r\n  type: string;\r\n  id: string;\r\n  onDrop(component: any): void;\r\n  addPreview(componentType: string, adjacentComponentId: string, after: boolean): void;\r\n  moveComponent: (id: string, newParentId: string) => void;\r\n  moveAdjacent: (id: string, adjacentComponentId: string, after: boolean) => void;\r\n  children: JSX.Element;\r\n  previewComponent?: PreviewComponentSchema;\r\n  className?: string;\r\n  isEditing: boolean;\r\n  editAction: JSX.Element;\r\n  deleteAction: JSX.Element;\r\n}\r\n\r\nexport interface DragItem {\r\n  id: string;\r\n  originalPath: string;\r\n  type: string;\r\n}\r\n\r\nexport const DraggableDroppableComponent: React.FC<DraggableDroppableComponentProps> = (props) => {\r\n  const dragRef = useRef<HTMLDivElement>(null);\r\n  const dropRef = useRef<HTMLDivElement>(null);\r\n\r\n  const isAfter = (monitor: DropTargetMonitor) => {\r\n    // Determine rectangle on screen\r\n    // dropRef.current is checked and expected in the caller function to be defined\r\n    const hoverBoundingRect = dropRef.current!.getBoundingClientRect()\r\n    \r\n    // Get vertical middle\r\n    const hoverMiddleY =\r\n      (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2\r\n\r\n    // Determine mouse position\r\n    const clientOffset = monitor.getClientOffset()\r\n\r\n    // Get pixels to the top\r\n    const hoverClientY = (clientOffset as XYCoord).y - hoverBoundingRect.top\r\n\r\n    return hoverClientY > hoverMiddleY;\r\n  };\r\n\r\n  const [, drop] = useDrop({\r\n    accept: ComponentTypes,\r\n    hover({ id: draggedId, type: draggedType }: DragItem, monitor: DropTargetMonitor) {\r\n      if (!dropRef.current || draggedId === props.id || !monitor.isOver({ shallow: true })) {\r\n        return;\r\n      }\r\n\r\n      if (!draggedId) {\r\n        // new component being dragged\r\n        props.addPreview(draggedType, props.id, isAfter(monitor));\r\n      } else if (draggedId !== props.id) {\r\n        props.moveAdjacent(draggedId, props.id, isAfter(monitor));\r\n      }\r\n    },\r\n    drop: (component, monitor) => {\r\n      if (monitor.isOver()) {\r\n        props.onDrop({...component, parent: props.id, isAfter: isAfter(monitor)});\r\n      }\r\n    },\r\n  })\r\n\r\n  const [{ isDragging }, drag, preview] = useDrag({\r\n    item: { type: props.type, id: props.id, operation: props.operation },\r\n    collect: (monitor: DragSourceMonitor) => ({\r\n      isDragging: monitor.isDragging(),\r\n    }),\r\n    end: (dropResult, monitor) => {\r\n      const { id: droppedId } = monitor.getItem();\r\n      const didDrop = monitor.didDrop();\r\n      if (droppedId === props.id) {\r\n        return;\r\n      }\r\n\r\n      if (!didDrop) {\r\n        props.moveComponent(droppedId, props.id)\r\n      }\r\n    },\r\n  })\r\n\r\n  const opacity = isDragging ? 0.5 : 1;\r\n\r\n  drop(dropRef);\r\n  drag(dragRef);\r\n\r\n  const moveAction = (\r\n    <div ref={dragRef}><Icon icon='arrows-alt'/></div>\r\n  );\r\n\r\n  const previewComponent = props.previewComponent ? <PreviewComponent type={props.previewComponent.type} /> : null;\r\n\r\n  return (\r\n    <div ref={dropRef} className={props.className} style={{ opacity }}>\r\n      <div ref={preview}></div>\r\n      { props.previewComponent && !props.previewComponent.isAfter ? previewComponent : null }\r\n      <Actions>\r\n        {props.editAction}\r\n        {moveAction}\r\n        {props.deleteAction}\r\n      </Actions>\r\n      \r\n      {props.children}\r\n      { props.previewComponent && props.previewComponent.isAfter ? previewComponent : null }\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react';\r\n\r\nimport _ from 'lodash';\r\n\r\nimport Icon from '@appitsy/forms/components/Basic/Icon';\r\nimport {\r\n  Form,\r\n  FormProps,\r\n} from '@appitsy/forms/components/Form/Form';\r\nimport { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\nimport { TableSchema } from '@appitsy/forms/types/DataComponentSchema';\r\nimport { Types } from '@appitsy/forms/types/Types';\r\nimport styled from '@emotion/styled';\r\nimport Styled from '@emotion/styled';\r\n\r\nimport { DraggableDroppableComponent } from './DraggableDroppableComponent';\r\nimport { DroppableComponent } from './DroppableComponent';\r\nimport { PreviewComponentSchema } from './PreviewComponent';\r\n\r\nconst StyledPage = Styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    padding: 7px;\r\n`;\r\nconst DropFieldsHere = styled.div`\r\n  background-color: lightgrey;\r\n  padding: 10px;\r\n  margin: 0px;\r\n  flex: 1;\r\n  text-align: center;\r\n`;\r\n\r\nconst StyledDraggableDroppableComponent = styled(DraggableDroppableComponent)`\r\n  padding: 7px;\r\n  background-color: ${(props) => props.isEditing ? '#ffffb3' : ''};\r\n`;\r\n\r\nconst StyledDroppableComponent = styled(DroppableComponent)`\r\n  display: flex;\r\n  align-items: stretch;\r\n`;\r\n\r\nexport type ComponentSchemaWithId = ComponentSchema & {\r\n  id: string;\r\n  isEditing: boolean;\r\n  previewComponent?: PreviewComponentSchema;\r\n  components?: ComponentSchemaWithId[];\r\n}\r\n\r\ninterface FormDesignerProps extends FormProps {\r\n  schema: ComponentSchemaWithId[];\r\n  onEdit(componentId: string): void;\r\n  onDelete(componentId: string): void;\r\n  onDrop(component: any): void;\r\n  addPreview(componentType: string, adjacentComponentId: string, after: boolean): void;\r\n  moveComponent: (id: string, newPath: string) => void;\r\n  moveAdjacent: (id: string, adjacentComponentId: string, after: boolean) => void;\r\n}\r\n\r\nexport class FormDesigner extends Form<FormDesignerProps> {\r\n  dropFieldsHereComponent = (<DropFieldsHere>Drop fields here!</DropFieldsHere>);\r\n\r\n  renderDesignerComponent = (component: ComponentSchemaWithId) => {\r\n    let renderedComponent;\r\n    const key = `${component.id}` \r\n    switch (component.type) {\r\n      case Types.Columns: {\r\n        const columnsComponentSchema = component as any;\r\n        let columns = super.renderComponent(columnsComponentSchema, key);\r\n        renderedComponent = columns;\r\n        break;\r\n      }\r\n      case Types.Panel: {\r\n        let panelComponentSchema = component as any;\r\n        let panel = super.renderComponent(panelComponentSchema, key);\r\n        renderedComponent = panel;\r\n        break;\r\n      }\r\n      case Types.Tabs: \r\n        let tabsComponentSchema = component as any;\r\n        let tabs = super.renderComponent(tabsComponentSchema, key);\r\n        renderedComponent = tabs;\r\n        break;\r\n      case Types.Table: \r\n        let tableComponentSchema = _.cloneDeep(component) as TableSchema;\r\n        if (!tableComponentSchema.display) {\r\n          tableComponentSchema.display = {};\r\n        }\r\n\r\n        tableComponentSchema.display.minOneRow = true;\r\n        tableComponentSchema.display.allowAddRemove = false;\r\n        tableComponentSchema.display.allowSorting = false;\r\n        renderedComponent = super.renderComponent(tableComponentSchema, key);\r\n        break;\r\n      default:\r\n        renderedComponent = super.renderComponent(component, key);\r\n        break;\r\n    }\r\n\r\n    const editAction = (\r\n      <div onClick={() => this.props.onEdit(component.id)}><Icon icon='pen'/></div>\r\n    );\r\n\r\n    const deleteAction = (\r\n      <div onClick={() => this.props.onDelete(component.id)}><Icon icon='trash-alt'/></div>\r\n    );\r\n\r\n    return (\r\n      <StyledDraggableDroppableComponent \r\n        id={component.id} \r\n        key={component.id} \r\n        type={component.type} \r\n        operation='move' \r\n        onDrop={this.props.onDrop}\r\n        // if this component can render children, we'll skip showing preview\r\n        // in the DraggableDroppableComponent and rather show it in Droppable area \r\n        // of the component\r\n        previewComponent={component.components ? undefined : component.previewComponent}\r\n        addPreview={this.props.addPreview}\r\n        moveComponent={this.props.moveComponent} \r\n        moveAdjacent={this.props.moveAdjacent}\r\n        isEditing={component.isEditing}\r\n        editAction={editAction}\r\n        deleteAction={deleteAction}\r\n      >\r\n        { renderedComponent }\r\n      </StyledDraggableDroppableComponent>\r\n    );\r\n  }\r\n\r\n  renderChildren() {\r\n    if (this.props.schema.length === 0) {\r\n      return [ this.dropFieldsHereComponent ];\r\n    }\r\n    return this.props.schema.map((component) => this.renderDesignerComponent(component));\r\n  }\r\n\r\n  renderChildComponents(childComponents?: ComponentSchemaWithId[], parentPath?: string, parentComponent?: ComponentSchemaWithId): JSX.Element[] {\r\n    if (parentPath === undefined || parentComponent === undefined) {\r\n      return [];\r\n    }\r\n\r\n\r\n    const inner = childComponents?.map((child) => this.renderDesignerComponent(child)) || [];\r\n\r\n    // ---- SPECIFIC COMPONENT OVERRIDE ----\r\n    if (parentComponent.type === Types.Table || parentComponent.type === Types.Columns) {\r\n      return [\r\n        ...inner,\r\n        (\r\n        <StyledDroppableComponent \r\n          id={parentComponent.id} \r\n          onDrop={this.props.onDrop}\r\n          previewComponent={parentComponent.previewComponent}\r\n          addPreview={this.props.addPreview}\r\n          className='appitsy-table-drop-here'\r\n        >\r\n          {this.dropFieldsHereComponent}\r\n        </StyledDroppableComponent>\r\n      )];\r\n    } \r\n\r\n    return [(\r\n      <StyledDroppableComponent \r\n        id={parentComponent.id} \r\n        onDrop={this.props.onDrop}\r\n        previewComponent={parentComponent.previewComponent}\r\n        addPreview={this.props.addPreview}\r\n      >\r\n        <div style={{flex: '1'}}>\r\n          { inner.length !== 0 ? inner : this.dropFieldsHereComponent }\r\n        </div>\r\n      </StyledDroppableComponent>\r\n    )];\r\n  }\r\n\r\n  renderRoot() {\r\n    return (\r\n      <StyledPage className='appitsy-droppable-form'>\r\n        { this.renderChildren() }\r\n      </StyledPage>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nimport styled from '@emotion/styled';\r\n\r\nimport { ComponentProperties } from './ComponentProperties/ComponentProperties';\r\nimport { RootComponent } from './Designer';\r\nimport { DroppableComponent } from './DroppableComponent';\r\nimport {\r\n  ComponentSchemaWithId,\r\n  FormDesigner,\r\n} from './FormDesigner';\r\n\r\nconst FormAndProperties = styled.div`\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: row;\r\n`;\r\n\r\nconst StyledComponentProperties = styled(ComponentProperties)`\r\n  background-color: #f8f9fa;\r\n  flex: 1;\r\n`;\r\n\r\nconst StyledDroppableComponent = styled(DroppableComponent)`\r\n  width: 70%;\r\n  margin: 10px;\r\n  overflow: \r\n`;\r\n\r\ninterface DroppableRendererProps {\r\n  rootComponent: RootComponent;\r\n  editingComponent?: ComponentSchemaWithId;\r\n  data: any;\r\n  onDrop(component: any): void;\r\n  onEdit(componentId: string): void;\r\n  onDelete(componentId: string): void;\r\n  addPreview(componentType: string, adjacentComponentId: string, after: boolean): void;\r\n  moveComponent: (id: string, newPath: string) => void;\r\n  moveAdjacent: (id: string, adjacentComponentId: string, after: boolean) => void;\r\n  updateComponentSchema: (componentSchema: any) => void;\r\n}\r\n\r\nexport const DroppableForm: React.FC<DroppableRendererProps> = (props) => {\r\n  return (\r\n    <FormAndProperties>\r\n      <StyledDroppableComponent \r\n        id=\"root\"\r\n        onDrop={props.onDrop} \r\n        previewComponent={props.rootComponent.preview}\r\n        addPreview={props.addPreview}\r\n      >\r\n          <FormDesigner \r\n            schema={props.rootComponent.components} \r\n            data={props.data} \r\n            onEdit={props.onEdit} \r\n            onDelete={props.onDelete} \r\n            onDrop={props.onDrop} \r\n            addPreview={props.addPreview}\r\n            moveComponent={props.moveComponent} \r\n            moveAdjacent={props.moveAdjacent} \r\n            onSubmit={(_) => {}}\r\n          />\r\n      </StyledDroppableComponent>\r\n      <StyledComponentProperties component={props.editingComponent} updateComponentSchema={props.updateComponentSchema} />\r\n    </FormAndProperties>\r\n  )\r\n}\r\n","import React, { useState } from 'react';\r\n\r\nimport { Form } from '@appitsy/forms';\r\nimport { getDisplayNameForType } from '@appitsy/forms/types/Types';\r\nimport styled from '@emotion/styled';\r\n\r\nconst nameAndLabelFormSchema = [\r\n  {\r\n    \"type\": \"text\",\r\n    \"name\": \"name\",\r\n    \"display\": {\r\n      \"label\": \"Name\"\r\n    },\r\n    \"validations\": {\r\n      \"required\": true\r\n    }\r\n  },\r\n  {\r\n    \"type\": \"text\",\r\n    \"name\": \"label\",\r\n    \"display\": {\r\n      \"label\": \"Label\"\r\n    }\r\n  },\r\n  {\r\n    \"components\": [\r\n      {\r\n        \"text\": \"Submit\",\r\n        \"style\": \"primary\",\r\n        \"type\": \"button\",\r\n        \"name\": \"ok\",\r\n        \"display\": {\r\n          \"label\": \"OK\"\r\n        }\r\n      },\r\n      {\r\n        \"text\": \"Submit\",\r\n        \"style\": \"secondary\",\r\n        \"type\": \"button\",\r\n        \"name\": \"cancel\",\r\n        \"display\": {\r\n          \"label\": \"Cancel\",\r\n          \"disableOnInvalidForm\": false\r\n        }\r\n      }\r\n    ],\r\n    \"type\": \"columns\",\r\n    \"name\": \"buttonColumns\",\r\n    \"display\": {\r\n      \"label\": \"\"\r\n    }\r\n  }\r\n];\r\n\r\nconst Heading = styled.h5`\r\n  text-align: center;\r\n  margin: 8px 0px;\r\n`;\r\n\r\ninterface NewComponentConfirmFormProps {\r\n\tcomponentId: string;\r\n\tcomponentType: string;\r\n\tonConfirm: (name: string, label: string) => void;\r\n\tonCancel: () => void;\r\n}\r\n\r\nexport const NewComponentConfirmForm = (props: NewComponentConfirmFormProps) => {\r\n\tconst [data, setData] = useState({});\r\n\tconst onSubmit = (data: any, buttonName: string) => {\r\n\t\tif (buttonName === 'ok') {\r\n\t\t\tprops.onConfirm(data.name, data.label)\r\n\t\t} else if (buttonName === 'cancel') {\r\n\t\t\tprops.onCancel();\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n    <>\r\n      <Heading>New Component: {getDisplayNameForType(props.componentType)}</Heading>\r\n      <Form \r\n        schema={nameAndLabelFormSchema}\r\n        data={data}\r\n        onSubmit={onSubmit}\r\n        onDataChange={setData}\r\n      />\r\n    </>\r\n\t);\r\n}","import React, {\r\n  useEffect,\r\n  useState,\r\n} from 'react';\r\n\r\nimport { remove } from 'lodash-es';\r\nimport cloneDeep from 'lodash-es/cloneDeep';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { HTML5Backend } from 'react-dnd-html5-backend';\r\nimport Modal from 'react-modal';\r\n\r\nimport styled from '@emotion/styled';\r\n\r\nimport { getDefaultPropsForType } from '../Utilities/ComponentTypes';\r\nimport ComponentList from './ComponentList';\r\nimport { DroppableForm } from './DroppableForm';\r\nimport { ComponentSchemaWithId } from './FormDesigner';\r\nimport { NewComponentConfirmForm } from './NewComponentConfirmForm';\r\nimport { PreviewComponentSchema } from './PreviewComponent';\r\n\r\nconst DesignerPage = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  height: 100%;\r\n`;\r\n\r\nconst ComponentListContainer = styled.div`\r\n  width: 300px;\r\n`;\r\n\r\nconst DesignerPreview = styled.div`\r\n  flex: 1;\r\n`;\r\n\r\nconst NewComponentConfirmModalWrapper = styled.div`\r\n  height: 100%;\r\n  display: flex;\r\n  \r\n`;\r\n\r\nconst NewComponentConfirmModal = styled(Modal)`\r\n  height: 100%;\r\n  width: 350px;\r\n  margin: auto;\r\n  padding-top: 300px;\r\n  outline: none;\r\n`;\r\n\r\nconst NewComponentConfirmFormWrapper = styled.div`\r\n  border: 2px solid grey;\r\n  border-radius: 5px;\r\n`;\r\n\r\nexport const ROOT_ID = 'root';\r\nexport const ROOT_PATH = '';\r\n\r\nexport interface RootComponent {\r\n  components: ComponentSchemaWithId[];\r\n  preview?: PreviewComponentSchema;\r\n}\r\n\r\ninterface NewComponentDroppedInfo {\r\n  componentId: string;\r\n  componentType: string;\r\n}\r\n\r\ninterface DesignerProps {\r\n  schema: ComponentSchemaWithId[];\r\n  onSchemaChange?: (updatedSchema: ComponentSchemaWithId[]) => void;\r\n}\r\n\r\nconst Designer = (props: DesignerProps) => {\r\n  const [data] = useState<Object>({});\r\n  const [rootComponent, setRootComponent] = useState<RootComponent>({ components: props.schema });\r\n  const [editingComponent, setEditingComponent] = useState<ComponentSchemaWithId>();\r\n  const [previewComponentState, setPreviewComponentState] = useState<any>(undefined);\r\n  const [newComponentDropped, setNewComponentDropped] = useState<NewComponentDroppedInfo | undefined>(undefined);\r\n\r\n  useEffect(() => {\r\n    setRootComponent({ components: props.schema });\r\n  }, [props.schema])\r\n\r\n  const updateRootComponent = (root: RootComponent, newEditComponent?: ComponentSchemaWithId): void => {\r\n    setRootComponent(root);\r\n    \r\n    if (props.onSchemaChange) {\r\n      props.onSchemaChange(root.components);\r\n    }\r\n\r\n    if (newEditComponent) {\r\n      setEditingComponent(newEditComponent);\r\n    } else if (editingComponent) {\r\n      // re-trigger editing component change if any is selected\r\n      const { component: updatedEditingComponent } = findComponentById(editingComponent.id, root.components);\r\n      setEditingComponent(updatedEditingComponent);\r\n    }\r\n  };\r\n\r\n  const onDrop = (componentEl: any) => {\r\n    if (componentEl.operation === \"drop\") {\r\n      let newComponent: ComponentSchemaWithId | undefined = getDefaultPropsForType(componentEl.type);\r\n\r\n      if (!newComponent) {\r\n        return;\r\n      }\r\n\r\n      const rootComponentCopy = cloneDeep(rootComponent);\r\n\r\n      if (componentEl.parent === ROOT_PATH) {\r\n        insertComponentAtIndex(rootComponentCopy, rootComponentCopy.components, newComponent, -1, true);\r\n      } else {\r\n        const { component: parentComponent, parent: grandParentComponent } = findComponentById(componentEl.parent, rootComponentCopy.components);\r\n        const parentChildComponents = parentComponent?.components;\r\n\r\n        if (parentChildComponents) {\r\n          insertComponentAtIndex(rootComponentCopy, parentChildComponents, newComponent, -1, true);\r\n        } else {\r\n          // grand parents children or if not present the root components\r\n          const grandParentChildren = grandParentComponent?.components || rootComponentCopy.components;\r\n          const parentIndex = grandParentChildren.findIndex((x: ComponentSchemaWithId) => x.id === parentComponent?.id);\r\n          const isAfter = componentEl.isAfter === true;\r\n          insertComponentAtIndex(rootComponentCopy, grandParentChildren, newComponent, parentIndex + (isAfter ? 1 : 0), true);\r\n        }\r\n      }\r\n    }\r\n    else if (componentEl.operation === 'move') {\r\n      const rootComponentCopy = cloneDeep(rootComponent);\r\n      const { component, parent: oldParentComponent } = findComponentById(componentEl.id, rootComponentCopy.components);\r\n\r\n      if (!component) {\r\n        return;\r\n      }\r\n\r\n      removeComponent(oldParentComponent?.components || rootComponentCopy.components, component.id);\r\n\r\n      if (componentEl.parent === ROOT_ID) {\r\n        insertComponentAtIndex(rootComponentCopy, rootComponentCopy.components, component, -1, false);\r\n      } else {\r\n        const { component: newParent, parent: newGrandParentComponent } = findComponentById(componentEl.parent, rootComponentCopy.components);\r\n\r\n        if (!newParent) {\r\n          return;\r\n        }\r\n\r\n        const newParentChildren = newParent.components;\r\n\r\n        if (newParentChildren) {\r\n          insertComponentAtIndex(rootComponentCopy, newParentChildren, component, -1, false);\r\n        } else {\r\n          const newGrandParentChildren = newGrandParentComponent?.components || rootComponentCopy.components;\r\n          const parentIndex = newGrandParentChildren.findIndex((x: ComponentSchemaWithId) => x.id === newParent.id);\r\n          insertComponentAtIndex(rootComponentCopy, newGrandParentChildren, component, parentIndex, false);\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const onEditWithId = (componentId: string) => {\r\n    const rootComponentCopy = cloneDeep(rootComponent);\r\n    const { component } = findComponentById(componentId, rootComponentCopy.components);\r\n\r\n    if (component === undefined) {\r\n      return;\r\n    }\r\n\r\n    onEditWithComponentInternal(component, rootComponentCopy);\r\n  }\r\n\r\n  const onEditWithComponent = (component: ComponentSchemaWithId) => {\r\n    const rootComponentCopy = cloneDeep(rootComponent);\r\n    onEditWithComponentInternal(component, rootComponentCopy);\r\n  }\r\n\r\n  const onEditWithComponentInternal = (component: ComponentSchemaWithId, rootComponentCopy: RootComponent) => {\r\n      // clear the earlier editing component\r\n      if (editingComponent !== undefined) {\r\n        const { component: previousEditingComponent } = findComponentById(editingComponent.id, rootComponentCopy.components);  \r\n        if (previousEditingComponent) {\r\n          previousEditingComponent.isEditing = false;\r\n        }\r\n      }\r\n  \r\n      component.isEditing = true;\r\n      updateRootComponent(rootComponentCopy, component);\r\n  }\r\n\r\n  const onDelete = (componentId: string) => {\r\n    const rootComponentCopy = cloneDeep(rootComponent);\r\n    const { component, parent } = findComponentById(componentId, rootComponentCopy.components);\r\n\r\n    if (!component) {\r\n      return;\r\n    }\r\n\r\n    const parentChildren = parent?.components || rootComponentCopy.components;\r\n    removeComponent(parentChildren, component.id);\r\n    \r\n    updateRootComponent(rootComponentCopy);\r\n  };\r\n\r\n  const moveComponent = (id: string, newParentId: string) => {\r\n    const rootComponentCopy = cloneDeep(rootComponent);\r\n    const { component, parent: oldParentComponent } = findComponentById(id, rootComponentCopy.components);\r\n\r\n    if(!component) {\r\n      return;\r\n    }\r\n\r\n    if (!oldParentComponent) {\r\n      removeComponent(rootComponentCopy.components, id);\r\n    } else {\r\n      removeComponent(oldParentComponent.components!, id);\r\n    }\r\n\r\n    const { parent: newParent } = findComponentById(newParentId, rootComponentCopy.components);\r\n    if (!newParent) {\r\n      return;\r\n    }\r\n\r\n    const newParentChildren = (newParent.components!);\r\n    insertComponent(newParentChildren, newParentChildren.length, component);\r\n    updateRootComponent(rootComponentCopy);\r\n  };\r\n\r\n  const moveAdjacent = (id: string, adjacentComponentId: string, after: boolean) => {\r\n    const rootComponentCopy = cloneDeep(rootComponent);\r\n    const { component, parent: oldParentComponent } = findComponentById(id, rootComponentCopy.components);\r\n\r\n    if(!component) {\r\n      return;\r\n    }\r\n\r\n    /// --> Remove from old parent\r\n    const oldParentChildren = oldParentComponent?.components || rootComponentCopy.components;\r\n    if (isAlreadyAdjacent(id, adjacentComponentId, oldParentChildren, after)) {\r\n      return;\r\n    }\r\n\r\n    removeComponent(oldParentChildren, id);\r\n\r\n    /// --> Add to new parent\r\n    const { component: adjacentComponent, parent: newParent } = findComponentById(adjacentComponentId, rootComponentCopy.components);\r\n    if (!adjacentComponent) {\r\n      return;\r\n    }\r\n\r\n    const newParentChildren = newParent?.components || rootComponentCopy.components;\r\n    insertComponent(newParentChildren, newParentChildren.indexOf(adjacentComponent) + (after ? 1 : 0), component); \r\n\r\n    updateRootComponent(rootComponentCopy);\r\n  }\r\n\r\n  const addPreview = (componentType: string, adjacentComponentId: string, after: boolean) => {\r\n    const rootComponentCopy = cloneDeep(rootComponent);\r\n    let previewComponentParent: ComponentSchemaWithId | undefined = undefined;\r\n    \r\n    if (previewComponentState !== undefined) {\r\n      // if similar state just return else remove and proceed\r\n      if (previewComponentState.parentId === adjacentComponentId \r\n            && previewComponentState.componentType === componentType \r\n            && previewComponentState.isAfter === after) {\r\n        return;\r\n      }\r\n\r\n      resetDragDropPreviewInternal(rootComponentCopy);\r\n    }\r\n          \r\n    if (adjacentComponentId === ROOT_ID) {\r\n      rootComponentCopy.preview = {\r\n        type: componentType,\r\n        isAfter: true\r\n      }\r\n\r\n    } else {\r\n      let { component: previewComponentParentTemp } = findComponentById(adjacentComponentId, rootComponentCopy.components);\r\n      if (!previewComponentParentTemp) {\r\n        console.error('Preview component parent not found!');\r\n        return;\r\n      }\r\n\r\n      previewComponentParent = previewComponentParentTemp;\r\n\r\n      previewComponentParent.previewComponent = {\r\n        type: componentType,\r\n        isAfter: after,\r\n      }\r\n    }\r\n\r\n    setPreviewComponentState({\r\n      parentId: adjacentComponentId,\r\n      componentType,\r\n      isAfter: after\r\n    });\r\n\r\n    updateRootComponent(rootComponentCopy);\r\n  }\r\n\r\n  const findComponentById = (id: string, findInSchema: ComponentSchemaWithId[]): { component: ComponentSchemaWithId | undefined, parent: ComponentSchemaWithId | undefined } => {\r\n    let component = findInSchema.find(c => c.id === id);\r\n    let parent: any = undefined;\r\n    if (component) {\r\n      return { component, parent: undefined };\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    let _ = findInSchema.some(c => {\r\n      let childChildren = c.components;\r\n      if (!childChildren) {\r\n        return false;\r\n      }\r\n\r\n      ({ component, parent } = findComponentById(id, childChildren));\r\n      if (!parent && component) {\r\n        // if component is found, but the immediate recursive call just returned the component.\r\n        // This means, this component is the parent - assign it.\r\n        // otherwise return the parent which was returned form the call\r\n        parent = c;\r\n      }\r\n\r\n      return !!component;\r\n    });\r\n\r\n    return { component, parent };\r\n  }\r\n\r\n  const removeComponent = (componentArray: ComponentSchemaWithId[], componentId: string) => {\r\n    remove(componentArray, x => x.id === componentId);\r\n  }\r\n\r\n  const insertComponent = (componentArray: ComponentSchemaWithId[], atIndex: number, component: ComponentSchemaWithId) => {\r\n    componentArray.splice(atIndex, 0, component);\r\n  }\r\n\r\n  const insertComponentAtIndex = (rootComponentCopy: RootComponent, componentArray: ComponentSchemaWithId[], component: ComponentSchemaWithId, atIndex: number, isNew: boolean) => {\r\n    if (isNew) {\r\n      // ask the name & label from the user\r\n      setNewComponentDropped({\r\n        componentId: component.id,\r\n        componentType: component.type,\r\n      });\r\n    }\r\n\r\n    if (atIndex === -1) {\r\n      componentArray.push(component);\r\n    } else {\r\n      componentArray.splice(atIndex, 0, component);\r\n    }\r\n      \r\n    updateRootComponent(rootComponentCopy);\r\n  };\r\n\r\n  const isAlreadyAdjacent = (componentId: string, adjacentComponentId: string, componentArray: ComponentSchemaWithId[], after: boolean) => {\r\n    const componentIndex = componentArray.findIndex(x => x.id === componentId);\r\n    \r\n    if (after) {\r\n      return componentIndex - 1 >= 0 && componentArray[componentIndex - 1].id === adjacentComponentId;\r\n    } else {\r\n      return componentIndex + 1 < componentArray.length && componentArray[componentIndex + 1].id === adjacentComponentId;\r\n    }\r\n  };\r\n\r\n  const resetDragDropPreview = () => {\r\n    if (!previewComponentState) {\r\n      return;\r\n    }\r\n\r\n    const rootComponentCopy = cloneDeep(rootComponent);\r\n\r\n    resetDragDropPreviewInternal(rootComponentCopy);\r\n    updateRootComponent(rootComponentCopy);\r\n    setPreviewComponentState(undefined);\r\n  }\r\n\r\n  const resetDragDropPreviewInternal = (rootComponentCopy: RootComponent) => {\r\n    if (previewComponentState.parentId === ROOT_ID) {\r\n      rootComponentCopy.preview = undefined;\r\n    } else {\r\n      const {component: previewComponentParent} = findComponentById(previewComponentState.parentId, rootComponentCopy.components);\r\n      if (previewComponentParent) {\r\n        previewComponentParent.previewComponent = undefined;\r\n      }\r\n    }\r\n  }\r\n\r\n  const updateComponentSchema = (updatedComponentSchema: any) => {\r\n    const rootComponentCopy = cloneDeep(rootComponent);\r\n    \r\n    // clear the earlier editing component\r\n    if (editingComponent === undefined) {\r\n      return;\r\n    }\r\n\r\n    const { component, parent: parentComponent } = findComponentById(editingComponent.id, rootComponentCopy.components);\r\n\r\n    if (component === undefined) {\r\n      // component wasn't found \r\n      return;\r\n    }\r\n\r\n    updatedComponentSchema.id = component.id;\r\n    const parentComponentChildren = parentComponent?.components || rootComponentCopy.components;\r\n    const componentIdx = parentComponentChildren.findIndex((x: ComponentSchemaWithId) => x.id === component.id);\r\n    parentComponentChildren.splice(componentIdx, 1, cloneDeep(updatedComponentSchema));\r\n\r\n    updateRootComponent(rootComponentCopy);\r\n  }\r\n\r\n  const onNewComponentConfirmed = (name: string, label: string) => {\r\n    const { component: newComponent } = findComponentById(newComponentDropped!.componentId, rootComponent.components);\r\n    \r\n    if (newComponent === undefined) {\r\n      return;\r\n    }\r\n\r\n    newComponent.name = name;\r\n    newComponent.display = {\r\n      ...(newComponent.display || {}),\r\n      label\r\n    };\r\n\r\n    // reset the root component with the new component as the editing one. \r\n    // as probably that one will be the one the user will edit next.\r\n    onEditWithComponent(newComponent);\r\n    setNewComponentDropped(undefined);\r\n  }\r\n\r\n  const onNewComponentCancelled = () => {\r\n    onDelete(newComponentDropped!.componentId);\r\n    setNewComponentDropped(undefined);\r\n  };\r\n  \r\n  return (\r\n    <DesignerPage>\r\n      <DndProvider backend={HTML5Backend}>\r\n        <ComponentListContainer className=\"bg-light\">\r\n          <ComponentList resetPreview={resetDragDropPreview}/>\r\n        </ComponentListContainer>\r\n\r\n        <DesignerPreview>\r\n          <DroppableForm\r\n            rootComponent={rootComponent}\r\n            data={data}\r\n            editingComponent={editingComponent}\r\n            onDrop={onDrop}\r\n            onEdit={onEditWithId}\r\n            onDelete={onDelete}\r\n            addPreview={addPreview}\r\n            moveComponent={moveComponent}\r\n            moveAdjacent={moveAdjacent}\r\n            updateComponentSchema={updateComponentSchema}\r\n          />\r\n        </DesignerPreview>\r\n      </DndProvider>\r\n      <NewComponentConfirmModalWrapper>\r\n\r\n      <NewComponentConfirmModal isOpen={newComponentDropped !== undefined}>\r\n        {\r\n          newComponentDropped\r\n          ? (\r\n            <NewComponentConfirmFormWrapper>\r\n              <NewComponentConfirmForm\r\n                componentId={newComponentDropped.componentId}\r\n                componentType={newComponentDropped.componentType}\r\n                onConfirm={onNewComponentConfirmed}\r\n                onCancel={onNewComponentCancelled}\r\n              />\r\n            </NewComponentConfirmFormWrapper>\r\n            )\r\n          : null\r\n        }\r\n        </NewComponentConfirmModal>\r\n        \r\n      </NewComponentConfirmModalWrapper>\r\n\r\n    </DesignerPage>\r\n  );\r\n};\r\n\r\nexport default Designer;\r\n","import './App.scss';\r\n\r\nimport React, { useState } from 'react';\r\n\r\nimport classNames from 'classnames';\r\n\r\nimport { Form } from '@appitsy/forms';\r\nimport styled from '@emotion/styled';\r\n\r\nimport Designer from './Components/Designer';\r\nimport { ComponentSchemaWithId } from './Components/FormDesigner';\r\nimport { SchemaEditor } from './Components/SchemaEditor';\r\nimport { prepareJsonSchema } from './Utilities/ComponentTypes';\r\n\r\nconst AppRoot = styled.div`\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tflex-grow: 1;\r\n`;\r\n\r\nconst AppTabs = styled.div`\r\n\tdisplay: flex;\r\n  flex-direction: column;\r\n\tflex-grow: 1;\r\n\r\n  ul.appitsy-builder-header-tabs {\r\n    margin: 10px auto;\r\n    border: none;\r\n\r\n    li {\r\n      width: 150px;\r\n      border: 0px;\r\n      bottom: 0px;\r\n      border-radius: 20px;\r\n      margin: 0px 10px;\r\n      text-align: center;\r\n      background: WhiteSmoke;\r\n      box-shadow: none;\r\n\r\n      &.active {\r\n        background: #e6e6e6;\r\n        box-shadow: 0 0 5px #a9afb8;\r\n      }\r\n\r\n      a.nav-item.nav-link {\r\n        color: #495057;\r\n        background: none;\r\n        border: none;\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst tabPanelStyle = { \r\n\tflexGrow: 1,\r\n\tborderTop: '2px solid #cfcfcf',\r\n};\r\n\r\nconst Card = styled.div`\r\n  max-width: 900px;\r\n  margin: 15px auto;\r\n`;\r\n\r\nconst TabContent = styled.div`\r\n  height: 100%;\r\n`;\r\n\r\nconst TabPane = styled.div`\r\n  height: 100%;\r\n`;\r\n\r\nconst App = () => {\r\n  const [data, setData] = useState({});\r\n  const [schema, setSchema] = useState<ComponentSchemaWithId[]>([]);\r\n  const [activeTab, setActiveTab] = useState(0);\r\n  \r\n  const tabPaneClasses = (idx: number) => classNames('tab-pane', idx === activeTab ? 'active': undefined);\r\n  const tabButtonClasses = (idx: number) => classNames(idx === activeTab ? 'active': undefined);\r\n\r\n  return (\r\n    <AppRoot>\r\n      <AppTabs>\r\n        <ul className=\"nav nav-tabs appitsy-builder-header-tabs\">\r\n          <li className={tabButtonClasses(0)} onClick={() => setActiveTab(0)}><a href='#designer' className='nav-item nav-link' data-toggle=\"tab\">Designer</a></li>\r\n          <li className={tabButtonClasses(1)} onClick={() => setActiveTab(1)}><a href='#schemaEditor' className='nav-item nav-link' data-toggle=\"tab\">Schema JSON</a></li>\r\n          <li className={tabButtonClasses(2)} onClick={() => setActiveTab(2)}><a href='#preview' className='nav-item nav-link' data-toggle=\"tab\">Preview</a></li>\r\n        </ul>\r\n\r\n        <TabContent className='tab-content'>\r\n          <TabPane className={tabPaneClasses(0)} style={tabPanelStyle} id='designer'>\r\n            <Designer schema={schema} onSchemaChange={(s) => setSchema(s)} />\r\n          </TabPane>\r\n\r\n          <TabPane className={tabPaneClasses(1)} style={tabPanelStyle} id='schemaEditor'>\r\n            <Card>\r\n              <SchemaEditor schema={schema} onSchemaChange={(s) => setSchema(s)} />\r\n            </Card>\r\n          </TabPane>\r\n\r\n          <TabPane className={tabPaneClasses(2)} style={tabPanelStyle} id='preview'>\r\n            <Card className=\"card card-body bg-light\">\r\n              <Form\r\n                schema={prepareJsonSchema(schema)}\r\n                data={data}\r\n                onDataChange={setData}\r\n                onSubmit={(data) => alert(JSON.stringify(data))}\r\n              />\r\n            </Card>\r\n          </TabPane>\r\n        </TabContent>\r\n      </AppTabs>\r\n    </AppRoot>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import _ from 'lodash';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nimport { ComponentSchema } from '@appitsy/forms/types/ComponentSchema';\r\nimport {\r\n  TableRowExpandedTypeName,\r\n} from '@appitsy/forms/types/DataComponentSchema';\r\nimport {\r\n  getDisplayNameForType,\r\n  Types,\r\n} from '@appitsy/forms/types/Types';\r\n\r\nimport { ComponentSchemaWithId } from '../Components/FormDesigner';\r\n\r\nexport const BasicComponentTypes = [\r\n  Types.TextField,\r\n  Types.TextArea,\r\n  Types.Number,\r\n  Types.Email,\r\n  Types.Button,\r\n  Types.Password,\r\n  Types.Checkbox,\r\n  Types.MultiCheckbox,\r\n  Types.Select,\r\n  Types.Radio,\r\n]\r\n\r\nexport const LayoutComponentTypes = [\r\n  Types.Panel,\r\n  Types.Columns,\r\n  Types.Tabs,\r\n]\r\n\r\nexport const DataComponentTypes = [\r\n  Types.Table,\r\n  Types.ObjectComponent,\r\n]\r\n\r\nexport const ComponentTypes = [\r\n  ...BasicComponentTypes,\r\n  ...LayoutComponentTypes,\r\n  ...DataComponentTypes,\r\n]\r\n\r\nconst createNewTab = (tabProperties: any) => {\r\n  const tab = {\r\n    ...tabProperties, \r\n    id: uuidv4(), \r\n    components: [],\r\n  }\r\n\r\n  return tab;\r\n}\r\n\r\nconst createTableRow = (): any => {\r\n  return {\r\n    id: uuidv4(),\r\n    name: TableRowExpandedTypeName,\r\n    type: TableRowExpandedTypeName,\r\n    components: []\r\n  };\r\n}\r\n\r\nexport const getDefaultPropsForType = (type: string): ComponentSchemaWithId | undefined => {\r\n  const id = uuidv4();\r\n  const commonProperties = {\r\n    id, \r\n    isEditing: false,\r\n    components: undefined,\r\n    type,\r\n    name: type,\r\n    display: {\r\n      label: getDisplayNameForType(type)\r\n    },\r\n  }\r\n  switch (type) {\r\n    case Types.TextField:\r\n    case Types.TextArea:\r\n    case Types.Email:\r\n    case Types.Number:\r\n    case Types.Checkbox:\r\n      return { ...commonProperties };\r\n    case Types.Button:\r\n      return _.defaultsDeep(\r\n        {\r\n          text: 'Submit',\r\n          style: 'primary'\r\n        },\r\n        commonProperties);\r\n    case Types.Password:\r\n      return _.defaultsDeep(\r\n        {          \r\n          display: {\r\n            placeholder: '********',\r\n          },\r\n        },\r\n        commonProperties);\r\n    case Types.Radio:\r\n    case Types.Select: \r\n    // COMMON code for radio & select\r\n    {\r\n      const selectOrRadio = {\r\n        ...commonProperties,\r\n        data: {\r\n          options: [\r\n            {\r\n              value: '',\r\n              label: '',\r\n            }\r\n          ]\r\n        }\r\n      };\r\n\r\n      return selectOrRadio as any as ComponentSchemaWithId;\r\n    }\r\n    case Types.MultiCheckbox: {\r\n      const multiCheckbox = { \r\n        ...commonProperties, \r\n        data: { \r\n          checkboxes: [\r\n            {\r\n              value: '',\r\n              label: ''\r\n            }\r\n          ] \r\n        } \r\n      }\r\n\r\n      return multiCheckbox as any as ComponentSchemaWithId;\r\n    }\r\n    case Types.Columns:\r\n    {\r\n      let columns: any = { \r\n        ...commonProperties,\r\n        components: [],\r\n      }\r\n\r\n      return columns as ComponentSchemaWithId;\r\n    }\r\n    case Types.Panel: \r\n    {\r\n      let panel: any = { \r\n        ...commonProperties,\r\n        components: [],\r\n      }\r\n\r\n      panel.display.expandable = true;\r\n      panel.display.expanded = true;\r\n\r\n      return panel as ComponentSchemaWithId;\r\n    }\r\n    case Types.Tabs: {\r\n      const tab1 = createNewTab({\r\n        name: 'tab1',\r\n        display: {\r\n          label: 'Tab1',\r\n        },\r\n      })\r\n      const tabComponent: any = { \r\n        ...commonProperties,\r\n        components: [ tab1 ] \r\n      }\r\n\r\n      return tabComponent as ComponentSchemaWithId;\r\n    }\r\n    case Types.Table: {\r\n      const table: any = { \r\n        ...commonProperties,\r\n        components: [\r\n          createTableRow()\r\n        ],\r\n        data: { \r\n          allowSorting: true,\r\n          allowAddRemove: true,\r\n        },\r\n      };\r\n\r\n      return table;\r\n    }\r\n    case Types.ObjectComponent: {\r\n      const objComponent: any = { \r\n        ...commonProperties,\r\n        components: [],\r\n      };\r\n\r\n      return objComponent;\r\n    }\r\n  \r\n    default: return undefined;\r\n  }\r\n}\r\n\r\nexport const parseComponentJson = (json: any): ComponentSchemaWithId => {\r\n  if (json.type === undefined) {\r\n    throw new Error('Wrong JSON being parsed');\r\n  }\r\n\r\n  // get default\r\n  const defaultProps = getDefaultPropsForType(json.type) || {};\r\n  const component = _.assign(defaultProps, json) as ComponentSchemaWithId;\r\n\r\n  const childComponents = component.components;\r\n  if (childComponents !== undefined) {\r\n    switch (component.type) {\r\n      case Types.Tabs:\r\n        component.components = childComponents.map((x: any) => { \r\n          const tab: any = createNewTab(x);\r\n          tab.components = x.components?.map((y: any) => parseComponentJson(y)) || [];\r\n          return tab;\r\n        });\r\n        break;\r\n      case Types.Table:\r\n        // Add back expanded rows if not present to make components droppable into it\r\n        if (!childComponents.some(x => x.type === TableRowExpandedTypeName)) {\r\n          component.components = [ \r\n            ...childComponents,\r\n            createTableRow(),\r\n          ]\r\n        }\r\n        break;\r\n      default:\r\n        component.components = childComponents.map(x => parseComponentJson(x));\r\n    }\r\n  }\r\n\r\n  return component;\r\n}\r\n\r\nexport const prepareJsonSchema = (schema: ComponentSchemaWithId[]): ComponentSchema[] => {\r\n  let jsonSchema: any[] = _.cloneDeep(schema);\r\n  \r\n  jsonSchema = jsonSchema.map(x => {\r\n    if (x.components !== undefined) {\r\n      x.components = prepareJsonSchema(x.components); \r\n    }\r\n    return x;\r\n  });\r\n\r\n  jsonSchema = jsonSchema.map(x => {\r\n    // remove expanded rows if they are empty\r\n    if (x.type === Types.Table) {\r\n      x.components = x.components.filter((y: any) => !(y.type === TableRowExpandedTypeName && y.components?.length === 0));\r\n    }\r\n\r\n    return x;\r\n  });\r\n\r\n  return jsonSchema.map((x: any) => {\r\n      delete x.id;\r\n      delete x.isEditing;\r\n      delete x.previewComponent;\r\n\r\n      if (x.components === undefined) {\r\n        delete x.components;\r\n      }\r\n\r\n      return x;\r\n  });\r\n}\r\n"],"sourceRoot":""}