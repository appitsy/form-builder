(this["webpackJsonpappitsy-builder"]=this["webpackJsonpappitsy-builder"]||[]).push([[0],{108:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SchemaEditor}));var C_appitsy_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12),C_appitsy_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),lodash__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),lodash__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__),react_json_view__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(109),react_json_view__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react_json_view__WEBPACK_IMPORTED_MODULE_4__),_appitsy_forms_components_Basic__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(17),_emotion_styled__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6),_Utilities_ComponentTypes__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(19);function _templateObject2(){var e=Object(C_appitsy_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_1__.a)(["\n\tmargin-left: 10px;\n"]);return _templateObject2=function(){return e},e}function _templateObject(){var e=Object(C_appitsy_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_1__.a)(["\n  text-align: right;\n  margin-bottom: 10px;\n"]);return _templateObject=function(){return e},e}var SchemaActions=_emotion_styled__WEBPACK_IMPORTED_MODULE_6__.a.div(_templateObject()),SchemaActionButton=Object(_emotion_styled__WEBPACK_IMPORTED_MODULE_6__.a)(_appitsy_forms_components_Basic__WEBPACK_IMPORTED_MODULE_5__.a)(_templateObject2()),SchemaEditor=function SchemaEditor(props){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),_useState2=Object(C_appitsy_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState,2),isSchemaEditable=_useState2[0],setIsSchemaEditable=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(""),_useState4=Object(C_appitsy_builder_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__.a)(_useState3,2),editingSchema=_useState4[0],setEditingSchema=_useState4[1],schema=Object(_Utilities_ComponentTypes__WEBPACK_IMPORTED_MODULE_7__.g)(props.schema),copyToClipboard=function(e){return navigator.clipboard.writeText(e)},jsonFormattedString=function(){return JSON.stringify(schema,null,"  ")},startSchemaEditing=function(){setIsSchemaEditable(!0),setEditingSchema(jsonFormattedString())},endSchemaEditing=function endSchemaEditing(){setIsSchemaEditable(!1),setEditingSchema("");var jsonArray=eval("(".concat(editingSchema,")"));if(!lodash__WEBPACK_IMPORTED_MODULE_3___default.a.isArray(jsonArray))throw new Error("JSON Array expected here..");var saveSchema=jsonArray.map((function(e){return Object(_Utilities_ComponentTypes__WEBPACK_IMPORTED_MODULE_7__.f)(e)}));props.onSchemaChange(saveSchema)};return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(SchemaActions,null,isSchemaEditable?react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(SchemaActionButton,{name:"saveSchema",display:{label:"Save",leftIcon:"save"},onClick:endSchemaEditing,style:"secondary"}):react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(SchemaActionButton,{name:"editSchema",display:{label:"Edit",leftIcon:"pen"},onClick:startSchemaEditing,style:"secondary"}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(SchemaActionButton,{name:"copyToClipboard",display:{label:"Copy",leftIcon:"clipboard"},onClick:function(){return copyToClipboard(jsonFormattedString())},style:"primary"})),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"card card-body bg-light"},isSchemaEditable?react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("textarea",{rows:20,value:editingSchema,onChange:function(e){return setEditingSchema(e.target.value)}}," sd "):react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(react_json_view__WEBPACK_IMPORTED_MODULE_4___default.a,{src:schema})))}},115:function(e,n,t){e.exports=t(148)},120:function(e,n,t){},121:function(e,n,t){},148:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(36),c=t.n(r),i=(t(120),t(12)),l=t(7),p=(t(121),t(5)),u=t.n(p),d=t(51),s=t(6),m=t(10),_=t(152),b=t(26),f=t(151),v=t(110),O=t(102),E=t.n(O),h=t(19),j=t(1),y=t(153);function g(){var e=Object(l.a)(["\n  display: block;\n"]);return g=function(){return e},e}function C(){var e=Object(l.a)(["\n  margin: 0px 10px 5px 10px;\n  padding-bottom: 5px;\n  border-bottom: 2px solid lightgrey;\n"]);return C=function(){return e},e}function x(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-top: 15px;\n"]);return x=function(){return e},e}function w(){var e=Object(l.a)(["\n  border-radius: 10px;\n  z-index: 2;\n  background-color: white;\n  box-shadow: 0 1px 3px 0 rgba(0,0,0,.1), 0 1px 2px 0 rgba(0,0,0,.06);\n  padding: 0.5rem 1rem;\n  float: left;\n  width: 90px;\n  height: 55px;\n  margin: 5px;\n  font-size: 14px;\n  text-align: center;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return w=function(){return e},e}function D(){var e=Object(l.a)(["\n  overflow: hidden;\n  clear: both;\n  height: 100%;\n"]);return D=function(){return e},e}var P,S,M,T=s.a.div(D()),A=Object(s.a)((function(e){var n={name:e.name,type:e.type,operation:e.operation},t=Object(y.a)({item:n,options:{dropEffect:"copy"},collect:function(e){return{opacity:e.isDragging()?.6:1}},end:function(n,t){e.resetPreview()}}),a=Object(i.a)(t,2),r=a[0].opacity,c=a[1];return o.a.createElement("div",{ref:c,className:e.className,style:{opacity:r}},e.children)}))(w()),k=s.a.div(x()),I=s.a.h6(C()),L=s.a.div(g()),R=function(e,n){return e.map((function(e){var t=Object(j.b)(e);return o.a.createElement(A,{name:t,type:e,operation:"drop",resetPreview:n},o.a.createElement("span",null,t))}))},B=function(e){return o.a.createElement(T,null,o.a.createElement(k,null,o.a.createElement(I,null,"Basic"),o.a.createElement(L,null,R(h.a,e.resetPreview))),o.a.createElement(k,null,o.a.createElement(I,null,"Layout"),o.a.createElement(L,null,R(h.d,e.resetPreview))),o.a.createElement(k,null,o.a.createElement(I,null,"Data"),o.a.createElement(L,null,R(h.c,e.resetPreview))))},W=t(8),U=t.n(W),N=t(15),K=function(e,n){return{type:"text",name:e,display:{label:n,hideLabel:0===n.length}}},q=function(e,n){return{type:"number",name:e,display:{label:n}}},F=function(e,n){return{type:"checkbox",name:e,display:{label:n}}},V=function(e,n,t){return{type:"table",name:e,display:{label:n},components:t}},J=K("name","Name"),H=K("label","Label"),z=F("hideLabel","Hide Label"),$=K("description","Description"),G=K("prefix","Prefix"),Q=K("tooltip","Tooltip"),X=K("suffix","Suffix"),Y=K("placeholder","Placeholder"),Z=F("hidden","Hidden"),ee=F("disabled","Disabled"),ne=K("path","Path"),te=K("defaultValue","Default Value"),ae=q("defaultValue","Default Value"),oe=F("required","Required"),re=K("minLength","Min Length"),ce=K("maxLength","Max Length"),ie=K("minValue","Min Value"),le=K("maxValue","Max Value"),pe=K("invalidChars","Invalid Characters"),ue=function(e){return{type:"columns",display:{hideLabel:!0},components:e}},de=function(e){return{type:"tabs",name:"configTabs",components:e,data:{path:"$"}}},se=function(e,n,t){return{name:e,display:{label:n},components:t}},me=function(e){return se("display","Display",e)},_e=function(e){return se("data","Data",e)},be=function(e){return se("validations","Validations",e)},fe=[H,z],ve=([].concat(fe,[$,Q,ue([Z,ee])]),[].concat(fe,[Y,ue([G,X])])),Oe=[ne],Ee=[].concat(Oe,[te]),he=[oe,re,ce],je=[J,K("style","Style"),de([me([H,K("leftIcon","Left Icon"),K("rightIcon","Right Icon")])])],ye=[J,de([me([H]),_e([ne,{type:"checkbox",name:"defaultValue",display:{label:"Default Value"}}]),be([oe])])],ge=[J,de([me([H])])],Ce=[J,de([me([H,G,X]),_e([ne,te]),be([oe,re,ce])])],xe=[J,de([me([H,$,Z,ee]),_e([V("checkboxes","Checkboxes",[K("value","Value"),K("label","Label")])]),be([ue([q("minSelected","Min Selected"),q("maxSelected","Max Selected")])])])],we=[J,de([me([H,$,G,X,Q,ee,Z]),_e([ae]),be([oe,ue([ie,le]),ue([re,ce])])])],De=[J,de([me(fe),_e(Oe)])],Pe=t(39),Se=[J,de([me([].concat(Object(Pe.a)(fe),[F("expanded","Initially Expanded"),F("expandable","Expandable")])),_e(Oe)])],Me=[J,de([me(ve),_e([ne]),be(he)])],Te=[J,de([me(ve),_e([V("options","Options",[K("value","Value"),K("label","Label")])]),be([])])],Ae=[J,de([me(ve),_e([ne,V("options","Options",[K("value","Value"),K("label","Label")])]),be([ue([q("minSelected","Min Selected"),q("maxSelected","Max Selected")])])])],ke=[J,de([me([].concat(Object(Pe.a)(fe),[F("minOneRow","Min One Row"),F("allowSorting","Allow Sorting"),F("allowAddRemove","Allow Add/Remove")])),_e(Oe)])],Ie=[J,de([me([Object(m.a)(Object(m.a)({},V("components","Tabs",[K("name","Tab Name"),(P="display",S=[K("label","")],{type:"object",name:P,display:{hideLabel:!0},components:S})])),{},{data:{path:"$.components",addNewDefault:'let tab = ({ "id": uuid(), components: [] }); tab;'}})]),_e([ne])])],Le=[J,de([me(ve),_e(Ee),be([oe,ue([re,ce]),pe])])],Re=[J,de([me(ve),_e(Ee),be([oe,ue([re,ce]),pe])])],Be=(M={},Object(N.a)(M,j.a.TextField,Re),Object(N.a)(M,j.a.TextArea,Le),Object(N.a)(M,j.a.Email,Ce),Object(N.a)(M,j.a.Number,we),Object(N.a)(M,j.a.Checkbox,ye),Object(N.a)(M,j.a.MultiCheckbox,xe),Object(N.a)(M,j.a.Password,Me),Object(N.a)(M,j.a.Select,Ae),Object(N.a)(M,j.a.Radio,Te),Object(N.a)(M,j.a.Button,je),Object(N.a)(M,j.a.Panel,Se),Object(N.a)(M,j.a.Columns,ge),Object(N.a)(M,j.a.Tabs,Ie),Object(N.a)(M,j.a.Table,ke),Object(N.a)(M,j.a.ObjectComponent,De),M);function We(){var e=Object(l.a)(["\n  padding: 15px;\n"]);return We=function(){return e},e}var Ue=s.a.div(We()),Ne=o.a.memo((function(e){var n=e.component?Be[e.component.type]:void 0;return o.a.createElement(Ue,{className:u()(e.className,"bg-light")},n?o.a.createElement(o.a.Fragment,null,o.a.createElement("span",null,"Component Properties"),o.a.createElement(d.a,{schema:n,data:e.component,onDataChange:e.updateComponentSchema})):o.a.createElement("h6",null,"Select a component to continue edit it.."))}),(function(e,n){return U.a.isEqual(e.component,n.component)})),Ke=t(154);function qe(){var e=Object(l.a)(["\n    border-radius: 10px;\n    background-color: darkgrey;\n    opacity: 50%;\n    font-weight: 500;\n    padding: 5px 10px;\n    line-height: 0.5rem;\n    text-transform: capitalize;\n"]);return qe=function(){return e},e}var Fe=s.a.div(qe()),Ve=function(e){return o.a.createElement(Fe,{className:"unselectable-text"},e.type)};function Je(){var e=Object(l.a)(["\n  width: 100%;\n  overflow-y: auto;\n  border: ",";\n"]);return Je=function(){return e},e}var He=s.a.div(Je(),(function(e){return e.border})),ze=function(e){var n=Object(Ke.a)({accept:h.b,hover:function(n,t){var a=n.id,o=n.type;!a&&t.isOver({shallow:!0})&&e.addPreview(o,e.id,!1)},drop:function(n,t){t.isOver()&&e.onDrop(Object(m.a)(Object(m.a)({},n),{},{parent:e.id}))},collect:function(e){return{isOver:e.isOver({shallow:!0}),canDrop:e.canDrop()}}}),t=Object(i.a)(n,2),a=t[0],r=a.canDrop,c=a.isOver,l=t[1],p=function(e,n){return e?"dashed 1px gray":"dashed 1px transparent"}(r&&c);return o.a.createElement(He,{border:p,ref:l,className:e.className},e.children,e.previewComponent?o.a.createElement(Ve,{type:e.previewComponent.type}):null)},$e=t(104),Ge=t(105),Qe=t(45),Xe=t(112),Ye=t(111),Ze=t(60),en=t(29),nn=t(22),tn=t(67);function an(){var e=Object(l.a)(["\n  display: flex; \n  flex-direction: row;\n\n  * {\n    margin: 0px 1px;\n  }\n\n  i {\n    font-size: 14px;\n  }\n"]);return an=function(){return e},e}var on=s.a.div(an());function rn(){var e=Object(l.a)(["\n  display: flex;\n  align-items: stretch;\n"]);return rn=function(){return e},e}function cn(){var e=Object(l.a)(["\n  padding: 7px;\n  background-color: ",";\n"]);return cn=function(){return e},e}function ln(){var e=Object(l.a)(["\n  background-color: lightgrey;\n  padding: 10px;\n  margin: 0px;\n  flex: 1;\n  text-align: center;\n"]);return ln=function(){return e},e}function pn(){var e=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    padding: 7px;\n"]);return pn=function(){return e},e}var un=s.a.div(pn()),dn=s.a.div(ln()),sn=Object(s.a)((function(e){var n=Object(a.useRef)(null),t=Object(a.useRef)(null),r=function(e){var n=t.current.getBoundingClientRect(),a=(n.bottom-n.top)/2;return e.getClientOffset().y-n.top>a},c=Object(Ke.a)({accept:h.b,hover:function(n,a){var o=n.id,c=n.type;t.current&&o!==e.id&&a.isOver({shallow:!0})&&(o?o!==e.id&&e.moveAdjacent(o,e.id,r(a)):e.addPreview(c,e.id,r(a)))},drop:function(n,t){t.isOver()&&e.onDrop(Object(m.a)(Object(m.a)({},n),{},{parent:e.id,isAfter:r(t)}))}}),l=Object(i.a)(c,2)[1],p=Object(y.a)({item:{type:e.type,id:e.id,operation:e.operation},collect:function(e){return{isDragging:e.isDragging()}},end:function(n,t){var a=t.getItem().id,o=t.didDrop();a!==e.id&&(o||e.moveComponent(a,e.id))}}),u=Object(i.a)(p,3),d=u[0].isDragging,s=u[1],_=u[2],b=d?.5:1;l(t),s(n);var f=o.a.createElement("div",{ref:n},o.a.createElement(nn.a,{icon:"arrows-alt"})),v=e.previewComponent?o.a.createElement(Ve,{type:e.previewComponent.type}):null;return o.a.createElement("div",{ref:t,className:e.className,style:{opacity:b}},o.a.createElement("div",{ref:_}),e.previewComponent&&!e.previewComponent.isAfter?v:null,o.a.createElement(on,null,e.editAction,f,e.deleteAction),e.children,e.previewComponent&&e.previewComponent.isAfter?v:null)}))(cn(),(function(e){return e.isEditing?"#ffffb3":""})),mn=Object(s.a)(ze)(rn()),_n=function(e){Object(Xe.a)(t,e);var n=Object(Ye.a)(t);function t(){var e,a,r,c,i,l;Object($e.a)(this,t);for(var p=arguments.length,u=new Array(p),d=0;d<p;d++)u[d]=arguments[d];return(l=n.call.apply(n,[this].concat(u))).dropFieldsHereComponent=o.a.createElement(dn,null,"Drop fields here!"),l.renderDesignerComponent=function(n){var p,u="".concat(n.id);switch(n.type){case j.a.Columns:var d=n;p=Object(Ze.a)((e=Object(Qe.a)(l),Object(en.a)(t.prototype)),"renderComponent",e).call(e,d,u);break;case j.a.Panel:var s=n;p=Object(Ze.a)((a=Object(Qe.a)(l),Object(en.a)(t.prototype)),"renderComponent",a).call(a,s,u);break;case j.a.Tabs:var m=n;p=Object(Ze.a)((r=Object(Qe.a)(l),Object(en.a)(t.prototype)),"renderComponent",r).call(r,m,u);break;case j.a.Table:var _=U.a.cloneDeep(n);_.display||(_.display={}),_.display.minOneRow=!0,_.display.allowAddRemove=!1,_.display.allowSorting=!1,p=Object(Ze.a)((c=Object(Qe.a)(l),Object(en.a)(t.prototype)),"renderComponent",c).call(c,_,u);break;default:p=Object(Ze.a)((i=Object(Qe.a)(l),Object(en.a)(t.prototype)),"renderComponent",i).call(i,n,u)}var b=o.a.createElement("div",{onClick:function(){return l.props.onEdit(n.id)}},o.a.createElement(nn.a,{icon:"pen"})),f=o.a.createElement("div",{onClick:function(){return l.props.onDelete(n.id)}},o.a.createElement(nn.a,{icon:"trash-alt"}));return o.a.createElement(sn,{id:n.id,key:n.id,type:n.type,operation:"move",onDrop:l.props.onDrop,previewComponent:n.components?void 0:n.previewComponent,addPreview:l.props.addPreview,moveComponent:l.props.moveComponent,moveAdjacent:l.props.moveAdjacent,isEditing:n.isEditing,editAction:b,deleteAction:f},p)},l}return Object(Ge.a)(t,[{key:"renderChildren",value:function(){var e=this;return 0===this.props.schema.length?[this.dropFieldsHereComponent]:this.props.schema.map((function(n){return e.renderDesignerComponent(n)}))}},{key:"renderChildComponents",value:function(e,n,t){var a=this;if(void 0===n||void 0===t)return[];var r=(null===e||void 0===e?void 0:e.map((function(e){return a.renderDesignerComponent(e)})))||[];return t.type===j.a.Table||t.type===j.a.Columns?[].concat(Object(Pe.a)(r),[o.a.createElement(mn,{id:t.id,onDrop:this.props.onDrop,previewComponent:t.previewComponent,addPreview:this.props.addPreview,className:"appitsy-table-drop-here"},this.dropFieldsHereComponent)]):[o.a.createElement(mn,{id:t.id,onDrop:this.props.onDrop,previewComponent:t.previewComponent,addPreview:this.props.addPreview},o.a.createElement("div",{style:{flex:"1"}},0!==r.length?r:this.dropFieldsHereComponent))]}},{key:"renderRoot",value:function(){return o.a.createElement(un,{className:"appitsy-droppable-form"},this.renderChildren())}}]),t}(tn.a);function bn(){var e=Object(l.a)(["\n  width: 70%;\n  margin: 10px;\n  overflow: \n"]);return bn=function(){return e},e}function fn(){var e=Object(l.a)(["\n  background-color: #f8f9fa;\n  flex: 1;\n"]);return fn=function(){return e},e}function vn(){var e=Object(l.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: row;\n"]);return vn=function(){return e},e}var On=s.a.div(vn()),En=Object(s.a)(Ne)(fn()),hn=Object(s.a)(ze)(bn()),jn=function(e){return o.a.createElement(On,null,o.a.createElement(hn,{id:"root",onDrop:e.onDrop,previewComponent:e.rootComponent.preview,addPreview:e.addPreview},o.a.createElement(_n,{schema:e.rootComponent.components,data:e.data,onEdit:e.onEdit,onDelete:e.onDelete,onDrop:e.onDrop,addPreview:e.addPreview,moveComponent:e.moveComponent,moveAdjacent:e.moveAdjacent,onSubmit:function(e){}})),o.a.createElement(En,{component:e.editingComponent,updateComponentSchema:e.updateComponentSchema}))};function yn(){var e=Object(l.a)(["\n  text-align: center;\n  margin: 8px 0px;\n"]);return yn=function(){return e},e}var gn=[{type:"text",name:"name",display:{label:"Name"},validations:{required:!0}},{type:"text",name:"label",display:{label:"Label"}},{components:[{text:"Submit",style:"primary",type:"button",name:"ok",display:{label:"OK"}},{text:"Submit",style:"secondary",type:"button",name:"cancel",display:{label:"Cancel",disableOnInvalidForm:!1}}],type:"columns",name:"buttonColumns",display:{label:""}}],Cn=s.a.h5(yn()),xn=function(e){var n=Object(a.useState)({}),t=Object(i.a)(n,2),r=t[0],c=t[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(Cn,null,"New Component: ",Object(j.b)(e.componentType)),o.a.createElement(d.a,{schema:gn,data:r,onSubmit:function(n,t){"ok"===t?e.onConfirm(n.name,n.label):"cancel"===t&&e.onCancel()},onDataChange:c}))};function wn(){var e=Object(l.a)(["\n  border: 2px solid grey;\n  border-radius: 5px;\n"]);return wn=function(){return e},e}function Dn(){var e=Object(l.a)(["\n  height: 100%;\n  width: 350px;\n  margin: auto;\n  padding-top: 300px;\n  outline: none;\n"]);return Dn=function(){return e},e}function Pn(){var e=Object(l.a)(["\n  height: 100%;\n  display: flex;\n  \n"]);return Pn=function(){return e},e}function Sn(){var e=Object(l.a)(["\n  flex: 1;\n"]);return Sn=function(){return e},e}function Mn(){var e=Object(l.a)(["\n  width: 300px;\n"]);return Mn=function(){return e},e}function Tn(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n"]);return Tn=function(){return e},e}var An=s.a.div(Tn()),kn=s.a.div(Mn()),In=s.a.div(Sn()),Ln=s.a.div(Pn()),Rn=Object(s.a)(E.a)(Dn()),Bn=s.a.div(wn()),Wn=function(e){var n=Object(a.useState)({}),t=Object(i.a)(n,1)[0],r=Object(a.useState)({components:e.schema}),c=Object(i.a)(r,2),l=c[0],p=c[1],u=Object(a.useState)(),d=Object(i.a)(u,2),s=d[0],O=d[1],E=Object(a.useState)(void 0),j=Object(i.a)(E,2),y=j[0],g=j[1],C=Object(a.useState)(void 0),x=Object(i.a)(C,2),w=x[0],D=x[1];Object(a.useEffect)((function(){p({components:e.schema})}),[e.schema]);var P=function(n,t){if(p(n),e.onSchemaChange&&e.onSchemaChange(n.components),t)O(t);else if(s){var a=T(s.id,n.components).component;O(a)}},S=function(e,n){if(void 0!==s){var t=T(s.id,n.components).component;t&&(t.isEditing=!1)}e.isEditing=!0,P(n,e)},M=function(e){var n=Object(b.a)(l),t=T(e,n.components),a=t.component,o=t.parent;if(a){var r=(null===o||void 0===o?void 0:o.components)||n.components;A(r,a.id),P(n)}},T=function e(n,t){var a=t.find((function(e){return e.id===n})),o=void 0;if(a)return{component:a,parent:void 0};t.some((function(t){var r=t.components;if(!r)return!1;var c=e(n,r);return a=c.component,!(o=c.parent)&&a&&(o=t),!!a}));return{component:a,parent:o}},A=function(e,n){Object(_.a)(e,(function(e){return e.id===n}))},k=function(e,n,t){e.splice(n,0,t)},I=function(e,n,t,a,o){o&&D({componentId:t.id,componentType:t.type}),-1===a?n.push(t):n.splice(a,0,t),P(e)},L=function(e,n,t,a){var o=t.findIndex((function(n){return n.id===e}));return a?o-1>=0&&t[o-1].id===n:o+1<t.length&&t[o+1].id===n},R=function(e){if("root"===y.parentId)e.preview=void 0;else{var n=T(y.parentId,e.components).component;n&&(n.previewComponent=void 0)}};return o.a.createElement(An,null,o.a.createElement(f.a,{backend:v.a},o.a.createElement(kn,{className:"bg-light"},o.a.createElement(B,{resetPreview:function(){if(y){var e=Object(b.a)(l);R(e),P(e),g(void 0)}}})),o.a.createElement(In,null,o.a.createElement(jn,{rootComponent:l,data:t,editingComponent:s,onDrop:function(e){if("drop"===e.operation){var n=Object(h.e)(e.type);if(!n)return;var t=Object(b.a)(l);if(""===e.parent)I(t,t.components,n,-1,!0);else{var a=T(e.parent,t.components),o=a.component,r=a.parent,c=null===o||void 0===o?void 0:o.components;if(c)I(t,c,n,-1,!0);else{var i=(null===r||void 0===r?void 0:r.components)||t.components,p=i.findIndex((function(e){return e.id===(null===o||void 0===o?void 0:o.id)})),u=!0===e.isAfter;I(t,i,n,p+(u?1:0),!0)}}}else if("move"===e.operation){var d=Object(b.a)(l),s=T(e.id,d.components),m=s.component,_=s.parent;if(!m)return;if(A((null===_||void 0===_?void 0:_.components)||d.components,m.id),"root"===e.parent)I(d,d.components,m,-1,!1);else{var f=T(e.parent,d.components),v=f.component,O=f.parent;if(!v)return;var E=v.components;if(E)I(d,E,m,-1,!1);else{var j=(null===O||void 0===O?void 0:O.components)||d.components,y=j.findIndex((function(e){return e.id===v.id}));I(d,j,m,y,!1)}}}},onEdit:function(e){var n=Object(b.a)(l),t=T(e,n.components).component;void 0!==t&&S(t,n)},onDelete:M,addPreview:function(e,n,t){var a=Object(b.a)(l);if(void 0!==y){if(y.parentId===n&&y.componentType===e&&y.isAfter===t)return;R(a)}if("root"===n)a.preview={type:e,isAfter:!0};else{var o=T(n,a.components).component;if(!o)return void console.error("Preview component parent not found!");o.previewComponent={type:e,isAfter:t}}g({parentId:n,componentType:e,isAfter:t}),P(a)},moveComponent:function(e,n){var t=Object(b.a)(l),a=T(e,t.components),o=a.component,r=a.parent;if(o){A(r?r.components:t.components,e);var c=T(n,t.components).parent;if(c){var i=c.components;k(i,i.length,o),P(t)}}},moveAdjacent:function(e,n,t){var a=Object(b.a)(l),o=T(e,a.components),r=o.component,c=o.parent;if(r){var i=(null===c||void 0===c?void 0:c.components)||a.components;if(!L(e,n,i,t)){A(i,e);var p=T(n,a.components),u=p.component,d=p.parent;if(u){var s=(null===d||void 0===d?void 0:d.components)||a.components;k(s,s.indexOf(u)+(t?1:0),r),P(a)}}}},updateComponentSchema:function(e){var n=Object(b.a)(l);if(void 0!==s){var t=T(s.id,n.components),a=t.component,o=t.parent;if(void 0!==a){e.id=a.id;var r=(null===o||void 0===o?void 0:o.components)||n.components,c=r.findIndex((function(e){return e.id===a.id}));r.splice(c,1,Object(b.a)(e)),P(n)}}}}))),o.a.createElement(Ln,null,o.a.createElement(Rn,{isOpen:void 0!==w},w?o.a.createElement(Bn,null,o.a.createElement(xn,{componentId:w.componentId,componentType:w.componentType,onConfirm:function(e,n){var t=T(w.componentId,l.components).component;void 0!==t&&(t.name=e,t.display=Object(m.a)(Object(m.a)({},t.display||{}),{},{label:n}),function(e){var n=Object(b.a)(l);S(e,n)}(t),D(void 0))},onCancel:function(){M(w.componentId),D(void 0)}})):null)))},Un=t(108);function Nn(){var e=Object(l.a)(["\n  height: 100%;\n"]);return Nn=function(){return e},e}function Kn(){var e=Object(l.a)(["\n  height: 100%;\n"]);return Kn=function(){return e},e}function qn(){var e=Object(l.a)(["\n  max-width: 900px;\n  margin: 15px auto;\n"]);return qn=function(){return e},e}function Fn(){var e=Object(l.a)(["\n\tdisplay: flex;\n  flex-direction: column;\n\tflex-grow: 1;\n\n  ul.appitsy-builder-header-tabs {\n    margin: 10px auto;\n    border: none;\n\n    li {\n      width: 150px;\n      border: 0px;\n      bottom: 0px;\n      border-radius: 20px;\n      margin: 0px 10px;\n      text-align: center;\n      background: WhiteSmoke;\n      box-shadow: none;\n\n      &.active {\n        background: #e6e6e6;\n        box-shadow: 0 0 5px #a9afb8;\n      }\n\n      a.nav-item.nav-link {\n        color: #495057;\n        background: none;\n        border: none;\n      }\n    }\n  }\n"]);return Fn=function(){return e},e}function Vn(){var e=Object(l.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tflex-grow: 1;\n"]);return Vn=function(){return e},e}var Jn=s.a.div(Vn()),Hn=s.a.div(Fn()),zn={flexGrow:1,borderTop:"2px solid #cfcfcf"},$n=s.a.div(qn()),Gn=s.a.div(Kn()),Qn=s.a.div(Nn()),Xn=function(){var e=Object(a.useState)({}),n=Object(i.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)([]),l=Object(i.a)(c,2),p=l[0],s=l[1],m=Object(a.useState)(0),_=Object(i.a)(m,2),b=_[0],f=_[1],v=function(e){return u()("tab-pane",e===b?"active":void 0)},O=function(e){return u()(e===b?"active":void 0)};return o.a.createElement(Jn,null,o.a.createElement(Hn,null,o.a.createElement("ul",{className:"nav nav-tabs appitsy-builder-header-tabs"},o.a.createElement("li",{className:O(0),onClick:function(){return f(0)}},o.a.createElement("a",{href:"#designer",className:"nav-item nav-link","data-toggle":"tab"},"Designer")),o.a.createElement("li",{className:O(1),onClick:function(){return f(1)}},o.a.createElement("a",{href:"#schemaEditor",className:"nav-item nav-link","data-toggle":"tab"},"Schema JSON")),o.a.createElement("li",{className:O(2),onClick:function(){return f(2)}},o.a.createElement("a",{href:"#preview",className:"nav-item nav-link","data-toggle":"tab"},"Preview"))),o.a.createElement(Gn,{className:"tab-content"},o.a.createElement(Qn,{className:v(0),style:zn,id:"designer"},o.a.createElement(Wn,{schema:p,onSchemaChange:function(e){return s(e)}})),o.a.createElement(Qn,{className:v(1),style:zn,id:"schemaEditor"},o.a.createElement($n,null,o.a.createElement(Un.a,{schema:p,onSchemaChange:function(e){return s(e)}}))),o.a.createElement(Qn,{className:v(2),style:zn,id:"preview"},o.a.createElement($n,{className:"card card-body bg-light"},o.a.createElement(d.a,{schema:Object(h.g)(p),data:t,onDataChange:r,onSubmit:function(e){return alert(JSON.stringify(e))}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Xn,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},19:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"d",(function(){return d})),t.d(n,"c",(function(){return s})),t.d(n,"b",(function(){return m})),t.d(n,"e",(function(){return f})),t.d(n,"f",(function(){return v})),t.d(n,"g",(function(){return O}));var a=t(39),o=t(10),r=t(8),c=t.n(r),i=t(87),l=t(16),p=t(1),u=[p.a.TextField,p.a.TextArea,p.a.Number,p.a.Email,p.a.Button,p.a.Password,p.a.Checkbox,p.a.MultiCheckbox,p.a.Select,p.a.Radio],d=[p.a.Panel,p.a.Columns,p.a.Tabs],s=[p.a.Table,p.a.ObjectComponent],m=[].concat(u,d,s),_=function(e){return Object(o.a)(Object(o.a)({},e),{},{id:Object(i.a)(),components:[]})},b=function(){return{id:Object(i.a)(),name:l.c,type:l.c,components:[]}},f=function(e){var n={id:Object(i.a)(),isEditing:!1,components:void 0,type:e,name:e,display:{label:Object(p.b)(e)}};switch(e){case p.a.TextField:case p.a.TextArea:case p.a.Email:case p.a.Number:case p.a.Checkbox:return Object(o.a)({},n);case p.a.Button:return c.a.defaultsDeep({text:"Submit",style:"primary"},n);case p.a.Password:return c.a.defaultsDeep({display:{placeholder:"********"}},n);case p.a.Radio:case p.a.Select:return Object(o.a)(Object(o.a)({},n),{},{data:{options:[{value:"",label:""}]}});case p.a.MultiCheckbox:return Object(o.a)(Object(o.a)({},n),{},{data:{checkboxes:[{value:"",label:""}]}});case p.a.Columns:return Object(o.a)(Object(o.a)({},n),{},{components:[]});case p.a.Panel:var t=Object(o.a)(Object(o.a)({},n),{},{components:[]});return t.display.expandable=!0,t.display.expanded=!0,t;case p.a.Tabs:var a=_({name:"tab1",display:{label:"Tab1"}});return Object(o.a)(Object(o.a)({},n),{},{components:[a]});case p.a.Table:return Object(o.a)(Object(o.a)({},n),{},{components:[b()],data:{allowSorting:!0,allowAddRemove:!0}});case p.a.ObjectComponent:return Object(o.a)(Object(o.a)({},n),{},{components:[]});default:return}},v=function e(n){if(void 0===n.type)throw new Error("Wrong JSON being parsed");var t=f(n.type)||{},o=c.a.assign(t,n),r=o.components;if(void 0!==r)switch(o.type){case p.a.Tabs:o.components=r.map((function(n){var t,a=_(n);return a.components=(null===(t=n.components)||void 0===t?void 0:t.map((function(n){return e(n)})))||[],a}));break;case p.a.Table:r.some((function(e){return e.type===l.c}))||(o.components=[].concat(Object(a.a)(r),[b()]));break;default:o.components=r.map((function(n){return e(n)}))}return o},O=function e(n){var t=c.a.cloneDeep(n);return(t=(t=t.map((function(n){return void 0!==n.components&&(n.components=e(n.components)),n}))).map((function(e){return e.type===p.a.Table&&(e.components=e.components.filter((function(e){var n;return!(e.type===l.c&&0===(null===(n=e.components)||void 0===n?void 0:n.length))}))),e}))).map((function(e){return delete e.id,delete e.isEditing,delete e.previewComponent,void 0===e.components&&delete e.components,e}))}}},[[115,1,2]]]);
//# sourceMappingURL=main.7a10e058.chunk.js.map